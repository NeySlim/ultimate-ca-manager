import{j as e}from"./radix-B6Y-MRu0.js";import{a as s}from"./vendor-DEQSVNfj.js";import{s as V}from"./ArrowLeft.es-CZcTzWfI.js";import{m as O}from"./DetailCard-BKBzFg8i.js";import{u as ee,d as c,q as D}from"./index-vswyqp58.js";import{U as te}from"./UnifiedPageHeader-Cbwye_R6.js";const X="ucm-detail-panel-width",A=280,Y=600,P=380;function he({title:o,subtitle:n,icon:l,tabs:a,activeTab:t,onTabChange:r,actions:i,stats:x,filters:m,activeFilters:j=0,onClearFilters:v,helpContent:f,helpTitle:h="Help",slideOverOpen:u=!1,slideOverTitle:b,slideOverContent:p,slideOverWidth:F="default",onSlideOverClose:y,splitView:w=!1,splitEmptyContent:U,children:K,loading:$=!1,className:B}){const{isMobile:N,isDesktop:z,isTouch:le,isLargeScreen:R}=ee(),[q,S]=s.useState(!1),[I,L]=s.useState(!1),[k,G]=s.useState(()=>{if(typeof window>"u")return P;try{const d=localStorage.getItem(X);if(d){const g=parseInt(d,10);if(g>=A&&g<=Y)return g}}catch{}return P}),[E,C]=s.useState(!1),M=s.useRef(null),T=s.useRef(k);s.useEffect(()=>{T.current=k},[k]);const J=s.useCallback(d=>{d.preventDefault(),d.stopPropagation(),C(!0)},[]);return s.useEffect(()=>{if(!E)return;const d=Q=>{if(!M.current)return;const Z=M.current.parentElement.getBoundingClientRect().right-Q.clientX,H=Math.max(A,Math.min(Y,Z));G(H),T.current=H},g=()=>{C(!1);try{localStorage.setItem(X,T.current.toString())}catch{}};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",g),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",g),document.body.style.cursor="",document.body.style.userSelect=""}},[E]),s.useEffect(()=>{if(!z)return;const d=g=>{g.key==="Escape"&&u&&y?.()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[z,u,y]),e.jsxs("div",{className:c("flex flex-col h-full w-full overflow-hidden",B),children:[e.jsx(te,{title:o,subtitle:n,icon:l,tabs:a,activeTab:t,onTabChange:r,filters:m,activeFilters:j,onClearFilters:v,onOpenFilters:()=>S(!0),actions:i,showHelp:!!f,onHelpClick:()=>L(!0),isMobile:N}),x&&x.length>0&&e.jsx(se,{stats:x,isMobile:N}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("main",{className:c("min-w-0 overflow-auto bg-bg-primary",w&&R?"flex-1 border-r border-border":"flex-1"),children:$?e.jsx(oe,{}):K}),w&&R&&e.jsxs("aside",{ref:M,style:{width:k},className:c("shrink-0 overflow-hidden bg-bg-secondary/30 relative",E&&"select-none"),children:[e.jsx("div",{className:c("absolute left-0 top-0 bottom-0 w-2 cursor-col-resize z-10 resize-handle",E&&"resizing"),onMouseDown:J,title:"Drag to resize panel",children:e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 resize-handle-line"})}),u&&p?e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 px-4 py-3 border-b border-border flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",children:b}),y&&e.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-bg-tertiary text-text-secondary hover:text-text-primary",children:e.jsx(D,{size:16})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:p})]}):U||e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-bg-tertiary flex items-center justify-center mb-3",children:e.jsx(O,{size:24,className:"text-text-tertiary"})}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Select an item to view details"})]})]}),!w&&u&&(z?e.jsx(re,{title:b,width:F,onClose:y,children:p}):e.jsx(W,{title:b,onClose:y,children:p})),w&&!R&&u&&e.jsx(W,{title:b,onClose:y,children:p})]}),N&&m&&e.jsx(_,{open:q,onClose:()=>S(!1),title:"Filters",children:e.jsx(ae,{filters:m,onClearFilters:v,onClose:()=>S(!1)})}),f&&(N?e.jsx(_,{open:I,onClose:()=>L(!1),title:h,children:f}):I&&e.jsx(ne,{title:h,onClose:()=>L(!1),children:f}))]})}function se({stats:o,isMobile:n}){const l={primary:"text-accent-primary",success:"status-success-text",warning:"status-warning-text",danger:"status-danger-text",info:"status-primary-text"};return n?e.jsx("div",{className:"shrink-0 border-b border-border bg-bg-secondary/30 flex overflow-x-auto scrollbar-none gap-4 px-4 py-2.5",children:o.map((a,t)=>{const r=a.icon,i=l[a.variant]||l.primary;return e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[r&&e.jsx("div",{className:c("w-8 h-8 rounded-lg flex items-center justify-center",`${i} bg-current/10`),children:e.jsx(r,{size:16,weight:"bold",className:i})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base text-text-primary",children:a.value}),e.jsx("p",{className:"text-xs text-text-secondary",children:a.label})]})]},t)})}):e.jsx("div",{className:"shrink-0 border-b border-border bg-bg-secondary/20 flex items-center gap-5 px-5 py-1.5",children:o.map((a,t)=>{const r=a.icon,i=l[a.variant]||l.primary;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[r&&e.jsx(r,{size:14,weight:"bold",className:i}),e.jsx("span",{className:"font-semibold text-xs text-text-primary",children:a.value}),e.jsx("span",{className:"text-xs text-text-secondary",children:a.label})]},t)})})}function re({title:o,width:n,onClose:l,children:a}){const t={narrow:"w-80",default:"w-96",wide:"w-[480px]"},r=t[n]||t.default;return e.jsxs("aside",{className:c("shrink-0 border-l border-border bg-bg-secondary/50","flex flex-col overflow-hidden shadow-lg","animate-slide-in-right",r),children:[e.jsxs("div",{className:"shrink-0 flex items-center justify-between px-4 py-3 border-b border-border bg-bg-primary",children:[e.jsx("h2",{className:"font-semibold text-sm text-text-primary truncate",children:o}),e.jsx("button",{onClick:l,className:c("w-8 h-8 rounded-lg flex items-center justify-center","text-text-secondary hover:text-text-primary hover:bg-bg-tertiary","transition-colors"),children:e.jsx(D,{size:18})})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-bg-primary",children:a})]})}function W({title:o,onClose:n,children:l}){const a=s.useRef(null),[t,r]=s.useState(0),[i,x]=s.useState(!1),m=s.useRef(0),j=s.useCallback(h=>{m.current=h.touches[0].clientX,x(!0)},[]),v=s.useCallback(h=>{if(!i)return;const b=h.touches[0].clientX-m.current;b>0&&r(b)},[i]),f=s.useCallback(()=>{x(!1),t>100&&n?.(),r(0)},[t,n]);return s.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 animate-fade-in",onClick:n}),e.jsxs("div",{ref:a,className:c("absolute inset-y-0 right-0 w-full bg-bg-primary","flex flex-col animate-slide-in-right",!i&&"transition-transform"),style:{transform:`translateX(${t}px)`},onTouchStart:j,onTouchMove:v,onTouchEnd:f,children:[e.jsxs("div",{className:"shrink-0 flex items-center gap-3 px-4 py-3 border-b border-border",children:[e.jsx("button",{onClick:n,className:c("w-11 h-11 rounded-lg flex items-center justify-center","text-text-secondary hover:text-text-primary hover:bg-bg-tertiary","transition-colors"),children:e.jsx(V,{size:22})}),e.jsx("h2",{className:"font-semibold text-lg text-text-primary truncate flex-1",children:o})]}),e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-16 bg-border rounded-r opacity-50"}),e.jsx("div",{className:"flex-1 overflow-auto",children:l})]})]})}function _({open:o,onClose:n,title:l,children:a}){const t=s.useRef(null),[r,i]=s.useState(0),[x,m]=s.useState(!1),j=s.useRef(0),v=s.useCallback(u=>{j.current=u.touches[0].clientY,m(!0)},[]),f=s.useCallback(u=>{if(!x)return;const p=u.touches[0].clientY-j.current;p>0&&i(p)},[x]),h=s.useCallback(()=>{m(!1),r>80&&n?.(),i(0)},[r,n]);return s.useEffect(()=>(o&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[o]),o?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 animate-fade-in",onClick:n}),e.jsxs("div",{ref:t,className:c("absolute inset-x-0 bottom-0 bg-bg-primary rounded-t-2xl","max-h-[80vh] flex flex-col animate-slide-up",!x&&"transition-transform"),style:{transform:`translateY(${r}px)`},children:[e.jsxs("div",{className:"shrink-0 pt-3 pb-2 px-4 cursor-grab",onTouchStart:v,onTouchMove:f,onTouchEnd:h,children:[e.jsx("div",{className:"w-10 h-1 rounded-full bg-border mx-auto mb-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"font-semibold text-lg text-text-primary",children:l}),e.jsx("button",{onClick:n,className:"w-10 h-10 rounded-lg flex items-center justify-center text-text-secondary hover:bg-bg-tertiary",children:e.jsx(D,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-4 pb-6",children:a})]})]}):null}function ne({title:o,onClose:n,children:l}){return s.useEffect(()=>{const a=t=>{t.key==="Escape"&&n?.()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[n]),e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 animate-fade-in",onClick:n}),e.jsxs("aside",{className:c("absolute top-4 right-4 bottom-4 w-80 bg-bg-primary rounded-xl","flex flex-col overflow-hidden shadow-2xl border border-border","animate-slide-in-right"),children:[e.jsxs("div",{className:"shrink-0 flex items-center justify-between px-4 py-3 border-b border-border",children:[e.jsx("h2",{className:"font-semibold text-sm text-text-primary",children:o}),e.jsx("button",{onClick:n,className:c("w-7 h-7 rounded-md flex items-center justify-center","text-text-secondary hover:text-text-primary hover:bg-bg-tertiary","transition-colors"),children:e.jsx(D,{size:16})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:l})]})]})}function ae({filters:o,onClearFilters:n,onClose:l}){const a=o?.some(t=>t.value);return e.jsxs("div",{className:"space-y-4",children:[o?.map(t=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:t.label}),t.type==="select"?e.jsxs("select",{value:t.value||"",onChange:r=>t.onChange?.(r.target.value),className:c("w-full h-11 px-3 rounded-lg border border-border bg-bg-primary","text-text-primary text-sm","focus:outline-none focus:ring-2 focus:ring-accent-primary/50"),children:[e.jsx("option",{value:"",children:t.placeholder||"All"}),t.options?.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}):e.jsx("input",{type:t.type||"text",value:t.value||"",onChange:r=>t.onChange?.(r.target.value),placeholder:t.placeholder,className:c("w-full h-11 px-3 rounded-lg border border-border bg-bg-primary","text-text-primary text-sm","focus:outline-none focus:ring-2 focus:ring-accent-primary/50")})]},t.key)),e.jsxs("div",{className:"flex gap-2 pt-2",children:[a&&n&&e.jsx("button",{onClick:()=>{n(),l?.()},className:c("flex-1 h-11 rounded-lg border border-border","text-text-secondary font-medium text-sm","hover:bg-bg-tertiary transition-colors"),children:"Clear Filters"}),e.jsx("button",{onClick:l,className:c("flex-1 h-11 rounded-lg bg-accent-primary text-white","font-medium text-sm hover:bg-accent-primary/90 transition-colors"),children:"Apply"})]})]})}function oe(){return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[200px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary/30 border-t-accent-primary rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Loading..."})]})})}export{he as R};
