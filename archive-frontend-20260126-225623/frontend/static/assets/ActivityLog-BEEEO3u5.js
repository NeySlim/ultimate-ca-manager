import{j as t,B as g,r as N,z as v}from"./index-DpKI132R.js";import{B as _}from"./Badge-DzIet9Yh.js";import{P as p}from"./PageTopBar-DTBE89Eo.js";import{F as T,a as o}from"./FiltersBar-CC-tp6_8.js";import{S as A,T as y}from"./SectionTabs-B6cSZBvU.js";import{u as I}from"./useAccount-CFo21a5b.js";import{e as w}from"./export-BEFxFx9V.js";import"./useQuery-D5Nud35m.js";import"./useMutation-BXZWBd1d.js";const C="_skeleton_1rmum_1",S="_shimmer_1rmum_1",$="_text_1rmum_22",E="_circular_1rmum_28",G="_rectangular_1rmum_32",B="_card_1rmum_37",R="_header_1rmum_45",D="_headerText_1rmum_52",F="_body_1rmum_59",H="_table_1rmum_66",W="_tableHeader_1rmum_73",M="_tableRow_1rmum_79",P="_dashboard_1rmum_92",U="_stats_1rmum_98",z="_statCard_1rmum_104",h={skeleton:C,shimmer:S,text:$,circular:E,rectangular:G,card:B,header:R,headerText:D,body:F,table:H,tableHeader:W,tableRow:M,dashboard:P,stats:U,statCard:z},x=({variant:s="text",width:c,height:a,className:r="",...n})=>{const m={width:c||(s==="text"?"100%":void 0),height:a||(s==="text"?"1em":void 0)},d=h[s]||h.text;return t.jsx("div",{className:`${h.skeleton} ${d} ${r}`,style:m,...n})},O="_container_ilt2n_1",V="_message_ilt2n_11",K="_spinner_ilt2n_17",u={container:O,message:V,spinner:K},q=({variant:s="spinner",message:c="Loading...",rows:a=5})=>s==="skeleton"?t.jsx(x,{}):s==="card"?t.jsx(x,{variant:"rectangular",width:"100%",height:200}):s==="table"?t.jsx("div",{children:Array.from({length:a}).map((r,n)=>t.jsx(x,{width:"100%",height:48,style:{marginBottom:"8px"}},n))}):t.jsxs("div",{className:u.container,children:[t.jsx("div",{className:u.spinner,children:t.jsx("i",{className:"ph ph-spinner"})}),c&&t.jsx("p",{className:u.message,children:c})]}),J="_container_193ol_1",Q="_shake_193ol_23",X="_icon_193ol_39",Y="_title_193ol_56",Z="_message_193ol_63",l={container:J,shake:Q,icon:X,title:Y,message:Z},tt=({message:s="An error occurred",error:c,onRetry:a,shake:r=!1})=>{const n=c?.message||s;return t.jsxs("div",{className:`${l.container} ${r?l.shake:""}`,children:[t.jsx("div",{className:l.icon,children:t.jsx("i",{className:"ph ph-warning-circle"})}),t.jsx("h3",{className:l.title,children:"Error"}),t.jsx("p",{className:l.message,children:n}),a&&t.jsx(g,{variant:"primary",icon:"ph ph-arrow-clockwise",onClick:a,children:"Retry"})]})},it="_activityLog_1tt6i_3",et="_filterGroupDate_1tt6i_9",st="_activityList_1tt6i_14",ct="_activityItem_1tt6i_23",at="_activityIcon_1tt6i_37",nt="_iconSuccess_1tt6i_49",rt="_iconError_1tt6i_57",ot="_iconWarning_1tt6i_65",lt="_iconInfo_1tt6i_73",dt="_iconGradient_1tt6i_81",mt="_activityContent_1tt6i_89",_t="_activityText_1tt6i_96",pt="_activityTime_1tt6i_107",i={activityLog:it,filterGroupDate:et,activityList:st,activityItem:ct,activityIcon:at,iconSuccess:nt,iconError:rt,iconWarning:ot,iconInfo:lt,iconGradient:dt,activityContent:mt,activityText:_t,activityTime:pt};function kt(){const[s,c]=N.useState("app-logs"),{data:a,isLoading:r,error:n}=I(),m=()=>{const e=a?.data||[];if(e.length===0){v.error("No activity data to export");return}w(e,"activity-logs-export",{format:"csv",columns:["timestamp","user","action","details","status","ip"]}),v.success("Activity logs exported successfully")};if(r)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"neutral",children:"Loading..."})}),t.jsx(q,{message:"Loading activity..."})]});if(n)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"danger",children:"Error"})}),t.jsx(tt,{error:n,message:"Error loading activity"})]});const d=a?.data||[],j=d.filter(e=>e.category==="app"||!e.category),f=d.filter(e=>e.category==="pki"),b=s==="app-logs"?j:f,k=e=>{switch(e){case"success":return i.iconSuccess;case"error":return i.iconError;case"warning":return i.iconWarning;case"info":return i.iconInfo;case"gradient":return i.iconGradient;default:return i.iconInfo}};return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"info",children:"Real-time"}),actions:t.jsx(g,{variant:"default",icon:"ph ph-download-simple",onClick:m,children:"Export Logs"})}),t.jsxs(T,{children:[t.jsxs("div",{className:i.filterGroupDate,children:[t.jsx(o,{label:"From",children:t.jsx("input",{type:"date",defaultValue:"2024-01-01"})}),t.jsx(o,{label:"To",children:t.jsx("input",{type:"date",defaultValue:"2024-01-15"})})]}),t.jsx(o,{label:"User",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Users"}),t.jsx("option",{children:"john.doe"}),t.jsx("option",{children:"admin"}),t.jsx("option",{children:"jane.smith"})]})}),t.jsx(o,{label:"Action Type",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Actions"}),t.jsx("option",{children:"Login"}),t.jsx("option",{children:"Configuration"}),t.jsx("option",{children:"User Management"})]})}),t.jsx(o,{label:"Search",children:t.jsx("input",{type:"text",placeholder:"Search activities..."})})]}),t.jsxs(A,{children:[t.jsx(y,{active:s==="app-logs",onClick:()=>c("app-logs"),children:"Application Logs"}),t.jsx(y,{active:s==="pki-ops",onClick:()=>c("pki-ops"),children:"PKI Operations"})]}),t.jsx("div",{className:i.activityList,children:b.map((e,L)=>t.jsxs("div",{className:i.activityItem,children:[t.jsx("div",{className:`${i.activityIcon} ${k(e.type)}`,children:t.jsx("i",{className:`ph ${e.icon}`})}),t.jsxs("div",{className:i.activityContent,children:[t.jsx("div",{className:i.activityText,dangerouslySetInnerHTML:{__html:e.text}}),t.jsx("div",{className:i.activityTime,children:e.time})]})]},L))})]})}export{kt as ActivityLog,kt as default};
