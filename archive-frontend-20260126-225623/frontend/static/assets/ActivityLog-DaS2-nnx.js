import{j as t,B as _,r as N,z as v}from"./index-BFyg8tas.js";import{B as r}from"./Badge-l_m74PsE.js";import{P as d}from"./PageTopBar-BfXcxdOD.js";import{F as T,a}from"./FiltersBar-FnX0YGfy.js";import{S as A,T as h}from"./SectionTabs-CzMvshne.js";import{u as I}from"./useAccount-VO38qzQF.js";import{e as k}from"./export-BEFxFx9V.js";import"./useQuery-C4JWi8VV.js";import"./useMutation-B7H7Q_fh.js";const b="_container_ilt2n_1",E="_message_ilt2n_11",S="_spinner_ilt2n_17",p={container:b,message:E,spinner:S},C=({message:e="Loading...",variant:c="neutral"})=>t.jsxs("div",{className:p.container,children:[t.jsx(r,{variant:c,children:"Loading"}),t.jsx("p",{className:p.message,children:e}),t.jsx("div",{className:p.spinner,children:t.jsx("i",{className:"ph ph-spinner"})})]}),w="_container_ldnfz_1",G="_icon_ldnfz_11",$="_title_ldnfz_16",z="_message_ldnfz_23",o={container:w,icon:G,title:$,message:z},B=({message:e="An error occurred",error:c,onRetry:n})=>{const l=c?.message||e;return t.jsxs("div",{className:o.container,children:[t.jsx("div",{className:o.icon,children:t.jsx("i",{className:"ph ph-warning-circle"})}),t.jsx("h3",{className:o.title,children:"Error"}),t.jsx("p",{className:o.message,children:l}),n&&t.jsx(_,{variant:"primary",icon:"ph ph-arrow-clockwise",onClick:n,children:"Retry"})]})},D="_activityLog_1tt6i_3",F="_filterGroupDate_1tt6i_9",W="_activityList_1tt6i_14",M="_activityItem_1tt6i_23",P="_activityIcon_1tt6i_37",R="_iconSuccess_1tt6i_49",U="_iconError_1tt6i_57",O="_iconWarning_1tt6i_65",V="_iconInfo_1tt6i_73",H="_iconGradient_1tt6i_81",K="_activityContent_1tt6i_89",q="_activityText_1tt6i_96",J="_activityTime_1tt6i_107",i={activityLog:D,filterGroupDate:F,activityList:W,activityItem:M,activityIcon:P,iconSuccess:R,iconError:U,iconWarning:O,iconInfo:V,iconGradient:H,activityContent:K,activityText:q,activityTime:J};function nt(){const[e,c]=N.useState("app-logs"),{data:n,isLoading:l,error:m}=I(),j=()=>{const s=n?.data||[];if(s.length===0){v.error("No activity data to export");return}k(s,"activity-logs-export",{format:"csv",columns:["timestamp","user","action","details","status","ip"]}),v.success("Activity logs exported successfully")};if(l)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(d,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"neutral",children:"Loading..."})}),t.jsx(C,{message:"Loading activity..."})]});if(m)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(d,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"danger",children:"Error"})}),t.jsx(B,{error:m,message:"Error loading activity"})]});const x=n?.data||[],y=x.filter(s=>s.category==="app"||!s.category),g=x.filter(s=>s.category==="pki"),u=e==="app-logs"?y:g,f=s=>{switch(s){case"success":return i.iconSuccess;case"error":return i.iconError;case"warning":return i.iconWarning;case"info":return i.iconInfo;case"gradient":return i.iconGradient;default:return i.iconInfo}};return t.jsxs("div",{className:i.activityLog,children:[t.jsx(d,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"info",children:"Real-time"}),actions:t.jsx(_,{variant:"default",icon:"ph ph-download-simple",onClick:j,children:"Export Logs"})}),t.jsxs(T,{children:[t.jsxs("div",{className:i.filterGroupDate,children:[t.jsx(a,{label:"From",children:t.jsx("input",{type:"date",defaultValue:"2024-01-01"})}),t.jsx(a,{label:"To",children:t.jsx("input",{type:"date",defaultValue:"2024-01-15"})})]}),t.jsx(a,{label:"User",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Users"}),t.jsx("option",{children:"john.doe"}),t.jsx("option",{children:"admin"}),t.jsx("option",{children:"jane.smith"})]})}),t.jsx(a,{label:"Action Type",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Actions"}),t.jsx("option",{children:"Login"}),t.jsx("option",{children:"Configuration"}),t.jsx("option",{children:"User Management"})]})}),t.jsx(a,{label:"Search",children:t.jsx("input",{type:"text",placeholder:"Search activities..."})})]}),t.jsxs(A,{children:[t.jsx(h,{active:e==="app-logs",onClick:()=>c("app-logs"),children:"Application Logs"}),t.jsx(h,{active:e==="pki-ops",onClick:()=>c("pki-ops"),children:"PKI Operations"})]}),t.jsx("div",{className:i.activityList,children:u.map((s,L)=>t.jsxs("div",{className:i.activityItem,children:[t.jsx("div",{className:`${i.activityIcon} ${f(s.type)}`,children:t.jsx("i",{className:`ph ${s.icon}`})}),t.jsxs("div",{className:i.activityContent,children:[t.jsx("div",{className:i.activityText,dangerouslySetInnerHTML:{__html:s.text}}),t.jsx("div",{className:i.activityTime,children:s.time})]})]},L))})]})}export{nt as ActivityLog,nt as default};
