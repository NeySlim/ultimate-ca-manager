import{j as t,r as L,B as T,z as m}from"./index-D0xMKOAQ.js";import{B as r}from"./Badge-EHEGLgdG.js";import{a as l,E as A}from"./ErrorState-qXSdVsVe.js";import{P as p}from"./PageTopBar-CK1Y_P8u.js";import{F as I,a as c}from"./FiltersBar-BusjnIBX.js";import{S as N,T as h}from"./SectionTabs-Bn3OUcsG.js";import{u as k}from"./useAccount-hXfpzrC8.js";import{e as b}from"./export-BEFxFx9V.js";import"./useQuery-dqIrbU0s.js";import"./useMutation-DJ8wsvSg.js";const S="_container_ilt2n_1",E="_message_ilt2n_11",C="_spinner_ilt2n_17",d={container:S,message:E,spinner:C},G=({variant:s="spinner",message:n="Loading...",rows:a=5})=>s==="skeleton"?t.jsx(l,{}):s==="card"?t.jsx(l,{variant:"rectangular",width:"100%",height:200}):s==="table"?t.jsx("div",{children:Array.from({length:a}).map((x,o)=>t.jsx(l,{width:"100%",height:48,style:{marginBottom:"8px"}},o))}):t.jsxs("div",{className:d.container,children:[t.jsx("div",{className:d.spinner,children:t.jsx("i",{className:"ph ph-spinner"})}),n&&t.jsx("p",{className:d.message,children:n})]}),w="_activityLog_1tt6i_3",B="_filterGroupDate_1tt6i_9",D="_activityList_1tt6i_14",F="_activityItem_1tt6i_23",W="_activityIcon_1tt6i_37",$="_iconSuccess_1tt6i_49",P="_iconError_1tt6i_57",R="_iconWarning_1tt6i_65",U="_iconInfo_1tt6i_73",z="_iconGradient_1tt6i_81",M="_activityContent_1tt6i_89",O="_activityText_1tt6i_96",V="_activityTime_1tt6i_107",i={activityLog:w,filterGroupDate:B,activityList:D,activityItem:F,activityIcon:W,iconSuccess:$,iconError:P,iconWarning:R,iconInfo:U,iconGradient:z,activityContent:M,activityText:O,activityTime:V};function et(){const[s,n]=L.useState("app-logs"),{data:a,isLoading:x,error:o}=k(),y=()=>{const e=a?.data||[];if(e.length===0){m.error("No activity data to export");return}b(e,"activity-logs-export",{format:"csv",columns:["timestamp","user","action","details","status","ip"]}),m.success("Activity logs exported successfully")};if(x)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"neutral",children:"Loading..."})}),t.jsx(G,{message:"Loading activity..."})]});if(o)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"danger",children:"Error"})}),t.jsx(A,{error:o,message:"Error loading activity"})]});const v=a?.data||[],j=v.filter(e=>e.category==="app"||!e.category),u=v.filter(e=>e.category==="pki"),_=s==="app-logs"?j:u,g=e=>{switch(e){case"success":return i.iconSuccess;case"error":return i.iconError;case"warning":return i.iconWarning;case"info":return i.iconInfo;case"gradient":return i.iconGradient;default:return i.iconInfo}};return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(r,{variant:"info",children:"Real-time"}),actions:t.jsx(T,{variant:"default",icon:"ph ph-download-simple",onClick:y,children:"Export Logs"})}),t.jsxs(I,{children:[t.jsxs("div",{className:i.filterGroupDate,children:[t.jsx(c,{label:"From",children:t.jsx("input",{type:"date",defaultValue:"2024-01-01"})}),t.jsx(c,{label:"To",children:t.jsx("input",{type:"date",defaultValue:"2024-01-15"})})]}),t.jsx(c,{label:"User",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Users"}),t.jsx("option",{children:"john.doe"}),t.jsx("option",{children:"admin"}),t.jsx("option",{children:"jane.smith"})]})}),t.jsx(c,{label:"Action Type",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Actions"}),t.jsx("option",{children:"Login"}),t.jsx("option",{children:"Configuration"}),t.jsx("option",{children:"User Management"})]})}),t.jsx(c,{label:"Search",children:t.jsx("input",{type:"text",placeholder:"Search activities..."})})]}),t.jsxs(N,{children:[t.jsx(h,{active:s==="app-logs",onClick:()=>n("app-logs"),children:"Application Logs"}),t.jsx(h,{active:s==="pki-ops",onClick:()=>n("pki-ops"),children:"PKI Operations"})]}),t.jsx("div",{className:i.activityList,children:_.map((e,f)=>t.jsxs("div",{className:i.activityItem,children:[t.jsx("div",{className:`${i.activityIcon} ${g(e.type)}`,children:t.jsx("i",{className:`ph ${e.icon}`})}),t.jsxs("div",{className:i.activityContent,children:[t.jsx("div",{className:i.activityText,dangerouslySetInnerHTML:{__html:e.text}}),t.jsx("div",{className:i.activityTime,children:e.time})]})]},f))})]})}export{et as ActivityLog,et as default};
