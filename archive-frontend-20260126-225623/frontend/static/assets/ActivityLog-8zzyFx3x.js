import{j as t,B as g,r as k,z as v}from"./index-BOohgPbS.js";import{B as _}from"./Badge-CVCwGTP8.js";import{P as p}from"./PageTopBar-Ce-wC3A3.js";import{F as T,a as o}from"./FiltersBar-CI3O6Vm1.js";import{S as A,T as y}from"./SectionTabs-szwA-JG2.js";import{u as I}from"./useAccount-DfJDyQR9.js";import{e as w}from"./export-BEFxFx9V.js";import"./useQuery-BvKZLgRY.js";import"./useMutation-B1a1vebK.js";const C="_skeleton_1rmum_1",S="_shimmer_1rmum_1",E="_text_1rmum_22",$="_circular_1rmum_28",G="_rectangular_1rmum_32",B="_card_1rmum_37",z="_header_1rmum_45",R="_headerText_1rmum_52",D="_body_1rmum_59",F="_table_1rmum_66",H="_tableHeader_1rmum_73",W="_tableRow_1rmum_79",M="_dashboard_1rmum_92",P="_stats_1rmum_98",U="_statCard_1rmum_104",h={skeleton:C,shimmer:S,text:E,circular:$,rectangular:G,card:B,header:z,headerText:R,body:D,table:F,tableHeader:H,tableRow:W,dashboard:M,stats:P,statCard:U},x=({variant:s="text",width:c,height:n,className:a="",...r})=>{const m={width:c||(s==="text"?"100%":void 0),height:n||(s==="text"?"1em":void 0)},l=h[s]||h.text;return t.jsx("div",{className:`${h.skeleton} ${l} ${a}`,style:m,...r})},O="_container_ilt2n_1",V="_message_ilt2n_11",K="_spinner_ilt2n_17",u={container:O,message:V,spinner:K},q=({variant:s="spinner",message:c="Loading...",rows:n=5})=>s==="skeleton"?t.jsx(x,{}):s==="card"?t.jsx(x,{variant:"rectangular",width:"100%",height:200}):s==="table"?t.jsx("div",{children:Array.from({length:n}).map((a,r)=>t.jsx(x,{width:"100%",height:48,style:{marginBottom:"8px"}},r))}):t.jsxs("div",{className:u.container,children:[t.jsx("div",{className:u.spinner,children:t.jsx("i",{className:"ph ph-spinner"})}),c&&t.jsx("p",{className:u.message,children:c})]}),J="_container_ldnfz_1",Q="_icon_ldnfz_11",X="_title_ldnfz_16",Y="_message_ldnfz_23",d={container:J,icon:Q,title:X,message:Y},Z=({message:s="An error occurred",error:c,onRetry:n})=>{const a=c?.message||s;return t.jsxs("div",{className:d.container,children:[t.jsx("div",{className:d.icon,children:t.jsx("i",{className:"ph ph-warning-circle"})}),t.jsx("h3",{className:d.title,children:"Error"}),t.jsx("p",{className:d.message,children:a}),n&&t.jsx(g,{variant:"primary",icon:"ph ph-arrow-clockwise",onClick:n,children:"Retry"})]})},tt="_activityLog_1tt6i_3",it="_filterGroupDate_1tt6i_9",et="_activityList_1tt6i_14",st="_activityItem_1tt6i_23",ct="_activityIcon_1tt6i_37",nt="_iconSuccess_1tt6i_49",at="_iconError_1tt6i_57",rt="_iconWarning_1tt6i_65",ot="_iconInfo_1tt6i_73",lt="_iconGradient_1tt6i_81",dt="_activityContent_1tt6i_89",mt="_activityText_1tt6i_96",_t="_activityTime_1tt6i_107",i={activityLog:tt,filterGroupDate:it,activityList:et,activityItem:st,activityIcon:ct,iconSuccess:nt,iconError:at,iconWarning:rt,iconInfo:ot,iconGradient:lt,activityContent:dt,activityText:mt,activityTime:_t};function bt(){const[s,c]=k.useState("app-logs"),{data:n,isLoading:a,error:r}=I(),m=()=>{const e=n?.data||[];if(e.length===0){v.error("No activity data to export");return}w(e,"activity-logs-export",{format:"csv",columns:["timestamp","user","action","details","status","ip"]}),v.success("Activity logs exported successfully")};if(a)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"neutral",children:"Loading..."})}),t.jsx(q,{message:"Loading activity..."})]});if(r)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"danger",children:"Error"})}),t.jsx(Z,{error:r,message:"Error loading activity"})]});const l=n?.data||[],j=l.filter(e=>e.category==="app"||!e.category),f=l.filter(e=>e.category==="pki"),b=s==="app-logs"?j:f,L=e=>{switch(e){case"success":return i.iconSuccess;case"error":return i.iconError;case"warning":return i.iconWarning;case"info":return i.iconInfo;case"gradient":return i.iconGradient;default:return i.iconInfo}};return t.jsxs("div",{className:i.activityLog,children:[t.jsx(p,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(_,{variant:"info",children:"Real-time"}),actions:t.jsx(g,{variant:"default",icon:"ph ph-download-simple",onClick:m,children:"Export Logs"})}),t.jsxs(T,{children:[t.jsxs("div",{className:i.filterGroupDate,children:[t.jsx(o,{label:"From",children:t.jsx("input",{type:"date",defaultValue:"2024-01-01"})}),t.jsx(o,{label:"To",children:t.jsx("input",{type:"date",defaultValue:"2024-01-15"})})]}),t.jsx(o,{label:"User",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Users"}),t.jsx("option",{children:"john.doe"}),t.jsx("option",{children:"admin"}),t.jsx("option",{children:"jane.smith"})]})}),t.jsx(o,{label:"Action Type",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Actions"}),t.jsx("option",{children:"Login"}),t.jsx("option",{children:"Configuration"}),t.jsx("option",{children:"User Management"})]})}),t.jsx(o,{label:"Search",children:t.jsx("input",{type:"text",placeholder:"Search activities..."})})]}),t.jsxs(A,{children:[t.jsx(y,{active:s==="app-logs",onClick:()=>c("app-logs"),children:"Application Logs"}),t.jsx(y,{active:s==="pki-ops",onClick:()=>c("pki-ops"),children:"PKI Operations"})]}),t.jsx("div",{className:i.activityList,children:b.map((e,N)=>t.jsxs("div",{className:i.activityItem,children:[t.jsx("div",{className:`${i.activityIcon} ${L(e.type)}`,children:t.jsx("i",{className:`ph ${e.icon}`})}),t.jsxs("div",{className:i.activityContent,children:[t.jsx("div",{className:i.activityText,dangerouslySetInnerHTML:{__html:e.text}}),t.jsx("div",{className:i.activityTime,children:e.time})]})]},N))})]})}export{bt as ActivityLog,bt as default};
