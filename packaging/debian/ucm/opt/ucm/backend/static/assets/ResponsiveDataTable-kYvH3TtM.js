import{j as e}from"./radix-B6Y-MRu0.js";import{a as t}from"./vendor-DEQSVNfj.js";import{s as de}from"./CaretDown.es-DuThAI6u.js";import{s as me,a as xe}from"./CaretUp.es-CYK8cpGg.js";import{s as ue}from"./CaretRight.es-B3hFfvz_.js";import{G as pe,u as he,d as u,A as be,q as ge}from"./index-vswyqp58.js";const ye=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M112,60a16,16,0,1,1,16,16A16,16,0,0,1,112,60Zm16,52a16,16,0,1,0,16,16A16,16,0,0,0,128,112Zm0,68a16,16,0,1,0,16,16A16,16,0,0,0,128,180Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M176,32V224a16,16,0,0,1-16,16H96a16,16,0,0,1-16-16V32A16,16,0,0,1,96,16h64A16,16,0,0,1,176,32Z",opacity:"0.2"}),t.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M160,16H96A16,16,0,0,0,80,32V224a16,16,0,0,0,16,16h64a16,16,0,0,0,16-16V32A16,16,0,0,0,160,16ZM128,208a12,12,0,1,1,12-12A12,12,0,0,1,128,208Zm0-68a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm0-68a12,12,0,1,1,12-12A12,12,0,0,1,128,72Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M118,60a10,10,0,1,1,10,10A10,10,0,0,1,118,60Zm10,58a10,10,0,1,0,10,10A10,10,0,0,0,128,118Zm0,68a10,10,0,1,0,10,10A10,10,0,0,0,128,186Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M120,60a8,8,0,1,1,8,8A8,8,0,0,1,120,60Zm8,60a8,8,0,1,0,8,8A8,8,0,0,0,128,120Zm0,68a8,8,0,1,0,8,8A8,8,0,0,0,128,188Z"}))]]),G=t.forwardRef((r,a)=>t.createElement(pe,{ref:a,...r,weights:ye}));G.displayName="DotsThreeVerticalIcon";const J=G;function Pe({data:r=[],columns:a=[],selectedId:d,onRowClick:n,selectable:p=!0,rowActions:i,searchable:l=!1,searchPlaceholder:m="Search...",searchKeys:s=[],externalSearch:x,onSearchChange:Z,toolbarFilters:f,toolbarActions:c,sortable:b=!1,defaultSort:j,pagination:w,defaultPerPage:F=25,emptyIcon:Q,emptyTitle:U="No data",emptyDescription:W,emptyAction:X,emptyState:C,loading:z=!1,className:Y}){const{isMobile:P,isDesktop:I,isTouch:Ae}=he(),T=C?.icon||Q,_=C?.title||U,$=C?.description||W,K=C?.action||X,[ee,te]=t.useState(""),M=x!==void 0?x:ee,re=Z||te,[v,ae]=t.useState(j||null),[D,O]=t.useState(null),V=t.useRef(null);t.useEffect(()=>{const o=g=>{V.current&&!V.current.contains(g.target)&&O(null)};if(D!==null)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[D]);const L=t.useMemo(()=>{if(!M||s.length===0)return r;const o=M.toLowerCase();return r.filter(g=>s.some(y=>{const k=g[y];return k&&String(k).toLowerCase().includes(o)}))},[r,M,s]),h=t.useMemo(()=>!v||!v.key?L:[...L].sort((o,g)=>{const y=o[v.key],k=g[v.key];if(y===k)return 0;if(y==null)return 1;if(k==null)return-1;const H=String(y).localeCompare(String(k),void 0,{numeric:!0});return v.direction==="desc"?-H:H}),[L,v]),[A,R]=t.useState(1),[N,se]=t.useState(F),E=w===!0||w===void 0&&h.length>F,S=w&&typeof w=="object";t.useEffect(()=>{if(E){const o=Math.ceil(h.length/N);A>o&&R(Math.max(1,o))}},[h.length,N,A,E]);const q=t.useMemo(()=>{if(S)return h;if(E){const o=(A-1)*N;return h.slice(o,o+N)}return h},[h,E,S,A,N]),B=t.useMemo(()=>S?w:E?{page:A,total:h.length,perPage:N,onChange:R,onPerPageChange:o=>{se(o),R(1)}}:null,[S,E,w,A,N,h.length]),ne=t.useCallback(o=>{b&&ae(g=>g?.key!==o?{key:o,direction:"asc"}:g.direction==="asc"?{key:o,direction:"desc"}:null)},[b]),ie=t.useMemo(()=>I?a:a.filter(o=>!o.hideOnMobile),[a,I]),{primaryCol:le,secondaryCol:ce,tertiaryCol:oe}=t.useMemo(()=>{const o=[...a].sort((g,y)=>(g.priority||99)-(y.priority||99));return{primaryCol:o[0],secondaryCol:o[1],tertiaryCol:o[2]}},[a]);return!z&&h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[T&&e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-bg-tertiary flex items-center justify-center mb-4",children:e.jsx(T,{size:32,className:"text-text-secondary"})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-1",children:_}),$&&e.jsx("p",{className:"text-sm text-text-secondary text-center max-w-sm mb-4",children:$}),K]}):e.jsxs("div",{className:u("flex flex-col h-full",Y),children:[(l||f||c)&&e.jsx(fe,{value:M,onChange:re,placeholder:m,isMobile:P,searchable:l,filters:f,actions:c}),P?e.jsx(Ne,{data:q,primaryCol:le,secondaryCol:ce,tertiaryCol:oe,selectedId:d,onRowClick:n,rowActions:i,loading:z}):e.jsx(je,{data:q,columns:ie,selectedId:d,onRowClick:n,rowActions:i,sort:v,onSort:ne,sortable:b,openActionMenu:D,setOpenActionMenu:O,actionMenuRef:V,loading:z}),B&&h.length>0&&e.jsx(we,{...B,isMobile:P})]})}function fe({value:r,onChange:a,placeholder:d,isMobile:n,searchable:p=!0,filters:i,actions:l}){return e.jsx("div",{className:u("shrink-0 border-b border-border/50 bg-bg-secondary/30",n?"px-4 py-3":"px-4 py-2.5"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[p&&e.jsxs("div",{className:"relative group flex-1 min-w-0",children:[e.jsx(be,{size:n?20:16,className:u("absolute left-3 top-1/2 -translate-y-1/2","text-text-tertiary group-focus-within:text-accent-primary transition-colors")}),e.jsx("input",{type:"text",value:r,onChange:m=>a(m.target.value),placeholder:d,className:u("w-full rounded-lg border border-border bg-bg-primary","text-text-primary placeholder:text-text-tertiary","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-accent-primary/30 focus:border-accent-primary","hover:border-border-hover",n?"h-11 pl-10 pr-4 text-base":"h-8 pl-9 pr-3 text-sm")}),r&&e.jsx("button",{onClick:()=>a(""),className:u("absolute right-2 top-1/2 -translate-y-1/2 rounded-md","text-text-tertiary hover:text-text-primary hover:bg-bg-hover","transition-all duration-150",n?"p-2":"p-1"),children:e.jsx(ge,{size:n?18:14,weight:"bold"})})]}),!n&&i&&i.length>0&&e.jsx(e.Fragment,{children:i.map(m=>e.jsxs("select",{value:m.value||"",onChange:s=>m.onChange?.(s.target.value),className:"h-8 px-2 text-sm rounded-lg border border-border bg-bg-primary text-text-primary shrink-0",children:[e.jsx("option",{value:"",children:m.placeholder||"All"}),m.options?.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]},m.key))}),l&&e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:l})]})})}function je({data:r,columns:a,selectedId:d,onRowClick:n,rowActions:p,sort:i,onSort:l,sortable:m,openActionMenu:s,setOpenActionMenu:x,actionMenuRef:Z,loading:f}){return e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 z-10 bg-bg-secondary/95 backdrop-blur-sm border-b border-border shadow-sm",children:e.jsxs("tr",{children:[a.map(c=>e.jsx("th",{onClick:()=>m&&c.sortable!==!1&&l(c.key),className:u("text-left px-4 py-2.5 text-xs font-semibold text-text-secondary uppercase tracking-wider","transition-colors duration-150",m&&c.sortable!==!1&&"cursor-pointer hover:text-text-primary hover:bg-bg-tertiary/50",i?.key===c.key&&"text-accent-primary",c.width&&`w-[${c.width}]`),children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[c.header||c.label,i?.key===c.key&&(i.direction==="asc"?e.jsx(me,{size:12,weight:"bold",className:"text-accent-primary"}):e.jsx(de,{size:12,weight:"bold",className:"text-accent-primary"}))]})},c.key)),p&&e.jsx("th",{className:"w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:f?e.jsx("tr",{children:e.jsx("td",{colSpan:a.length+(p?1:0),className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary/30 border-t-accent-primary rounded-full animate-spin"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"Loading..."})]})})}):r.map((c,b)=>e.jsxs("tr",{onClick:()=>n?.(c),className:u("group transition-all duration-150 table-row-hover",n&&"cursor-pointer",d===c.id&&"row-selected"),children:[a.map(j=>e.jsx("td",{className:"px-4 py-3 transition-colors",children:j.render?j.render(c[j.key],c):c[j.key]??"â€”"},j.key)),p&&e.jsx("td",{className:"px-2 py-2.5 relative",children:e.jsx(ve,{row:c,idx:b,actions:p(c),isOpen:s===b,onToggle:()=>x(s===b?null:b),menuRef:s===b?Z:null})})]},c.id||b))})]})})}function ve({row:r,idx:a,actions:d,isOpen:n,onToggle:p,menuRef:i}){return!d||d.length===0?null:e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),p()},className:u("w-8 h-8 rounded-lg flex items-center justify-center","text-text-tertiary opacity-0 group-hover:opacity-100","hover:bg-bg-tertiary hover:text-text-primary","transition-all duration-150",n&&"opacity-100 bg-accent-primary/10 text-accent-primary"),children:e.jsx(J,{size:18,weight:"bold"})}),n&&e.jsx("div",{className:u("absolute right-0 top-full mt-1 z-20","min-w-[180px] py-1.5 rounded-xl border border-border bg-bg-primary","shadow-xl shadow-black/10","animate-fade-in"),children:d.map((l,m)=>{const s=l.icon;return e.jsxs("button",{onClick:x=>{x.stopPropagation(),l.onClick?.(),p()},className:u("w-full flex items-center gap-2.5 px-3 py-2 text-sm","transition-all duration-150",l.variant==="danger"?"status-danger-text hover:status-danger-bg":"text-text-primary hover:bg-accent-primary/5 hover:text-accent-primary"),children:[s&&e.jsx(s,{size:16,weight:"duotone"}),l.label]},m)})})]})}function Ne({data:r,primaryCol:a,secondaryCol:d,tertiaryCol:n,selectedId:p,onRowClick:i,rowActions:l,loading:m}){return m?e.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-accent-primary/30 border-t-accent-primary rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"Loading..."})]})}):e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"divide-y divide-border/50",children:r.map((s,x)=>e.jsx(ke,{row:s,primaryCol:a,secondaryCol:d,tertiaryCol:n,isSelected:p===s.id,onClick:()=>i?.(s),actions:l?.(s)},s.id||x))})})}function ke({row:r,primaryCol:a,secondaryCol:d,tertiaryCol:n,isSelected:p,onClick:i,actions:l}){const[m,s]=t.useState(!1);return e.jsxs("div",{onClick:i,className:u("px-4 py-3.5 transition-all duration-150","active:bg-bg-tertiary active:scale-[0.99]",p&&"mobile-row-selected"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[a&&e.jsx("div",{className:u("font-medium truncate transition-colors",p?"text-accent-primary":"text-text-primary"),children:a.render?a.render(r[a.key],r):r[a.key]}),d&&e.jsx("div",{className:"text-sm text-text-secondary mt-0.5",children:d.render?d.render(r[d.key],r):r[d.key]}),n&&e.jsx("div",{className:"mt-1.5",children:n.render?n.render(r[n.key],r):r[n.key]})]}),l&&l.length>0&&e.jsx("button",{onClick:x=>{x.stopPropagation(),s(!m)},className:u("w-11 h-11 shrink-0 rounded-lg flex items-center justify-center","text-text-secondary hover:bg-bg-tertiary active:bg-bg-hover"),children:e.jsx(J,{size:22,weight:"bold"})})]}),m&&l&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border flex flex-wrap gap-2",children:l.map((x,Z)=>{const f=x.icon;return e.jsxs("button",{onClick:c=>{c.stopPropagation(),x.onClick?.(),s(!1)},className:u("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium","border border-border transition-colors",x.variant==="danger"?"status-danger-text hover:status-danger-bg":"text-text-primary hover:bg-bg-tertiary"),children:[f&&e.jsx(f,{size:16}),x.label]},Z)})})]})}function we({page:r,total:a,perPage:d,onChange:n,onPerPageChange:p,isMobile:i}){const l=Math.ceil(a/d),m=(r-1)*d+1,s=Math.min(r*d,a);return e.jsxs("div",{className:u("shrink-0 border-t border-border bg-bg-secondary/30","flex items-center justify-between",i?"px-4 py-3":"px-4 py-2"),children:[e.jsxs("p",{className:u("text-text-secondary font-medium",i?"text-sm":"text-xs"),children:[e.jsxs("span",{className:"text-text-primary",children:[m,"-",s]})," of ",e.jsx("span",{className:"text-text-primary",children:a})]}),e.jsxs("div",{className:u("flex items-center",i?"gap-2":"gap-1.5"),children:[!i&&p&&e.jsx("select",{value:d,onChange:x=>p(Number(x.target.value)),className:u("h-7 px-2 pr-6 rounded-md border border-border bg-bg-primary","text-xs text-text-primary cursor-pointer","focus:outline-none focus:ring-1 focus:ring-accent-primary","hover:border-accent-primary/50 transition-colors"),children:[10,25,50,100].map(x=>e.jsxs("option",{value:x,children:[x,"/page"]},x))}),e.jsx("button",{onClick:()=>n(r-1),disabled:r<=1,className:u("rounded-lg flex items-center justify-center","border border-border bg-bg-primary","transition-all duration-150","disabled:opacity-40 disabled:cursor-not-allowed","enabled:hover:bg-accent-primary/5 enabled:hover:border-accent-primary/50 enabled:hover:text-accent-primary","enabled:active:scale-95",i?"w-11 h-11":"w-8 h-8"),children:e.jsx(xe,{size:i?20:16,weight:"bold"})}),e.jsxs("span",{className:u("px-3 py-1 rounded-md bg-bg-tertiary/50 text-text-primary font-medium",i?"text-sm":"text-xs"),children:[e.jsx("span",{className:"text-accent-primary",children:r}),e.jsx("span",{className:"text-text-tertiary mx-0.5",children:"/"}),l]}),e.jsx("button",{onClick:()=>n(r+1),disabled:r>=l,className:u("rounded-lg flex items-center justify-center","border border-border bg-bg-primary","transition-all duration-150","disabled:opacity-40 disabled:cursor-not-allowed","enabled:hover:bg-accent-primary/5 enabled:hover:border-accent-primary/50 enabled:hover:text-accent-primary","enabled:active:scale-95",i?"w-11 h-11":"w-8 h-8"),children:e.jsx(ue,{size:i?20:16,weight:"bold"})})]})]})}export{Pe as R};
