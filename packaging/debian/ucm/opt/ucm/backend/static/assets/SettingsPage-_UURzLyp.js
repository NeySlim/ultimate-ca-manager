const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/settings-DbRG-wdj.js","assets/index-vswyqp58.js","assets/radix-B6Y-MRu0.js","assets/vendor-DEQSVNfj.js","assets/index-_glI2Qgx.css","assets/ArrowsClockwise.es-DS70dwCP.js","assets/Globe.es-CtUoIY1T.js","assets/Lightning.es-C-Sz8AXK.js","assets/PencilSimple.es-CJefJBPq.js","assets/Plus.es-DN9hvW10.js","assets/TestTube.es-BJzbVb1c.js","assets/Trash.es-DhgoD9TD.js","assets/Modal-7_eTIvz3.js","assets/Badge-CZ5NzBfK.js","assets/EmptyState-B4dAc_K5.js","assets/Select-PwXyFoxR.js","assets/CaretDown.es-DuThAI6u.js","assets/Textarea-DuI5mbE0.js","assets/HelpCard-BINCqYIf.js","assets/DetailCard-BKBzFg8i.js","assets/Fingerprint.es-a52JDt2Q.js"])))=>i.map(i=>d[i]);
import{G as S,c as Je,_ as Xe,p as Y,R as oe,h as z,y as de,u as ea,L as aa,I as m,B as p,f as q,k as ta,S as sa}from"./index-vswyqp58.js";import{j as e}from"./radix-B6Y-MRu0.js";import{a,u as ra}from"./vendor-DEQSVNfj.js";import{b as B}from"./Globe.es-CtUoIY1T.js";import{s as re}from"./Download.es-Bp_lE9WD.js";import{D as b,f,g as o,h as D,i as g,l as la}from"./DetailCard-BKBzFg8i.js";import{m as Z}from"./FloppyDisk.es-CJlG_KS3.js";import{m as me}from"./ListBullets.es-D737ktVU.js";import{n as le}from"./Trash.es-DhgoD9TD.js";import{H as na}from"./HelpModal-BnkmCwhU.js";import{B as ia}from"./Badge-CZ5NzBfK.js";import{M as ne}from"./Modal-7_eTIvz3.js";import{S as G}from"./Select-PwXyFoxR.js";import{F as ie}from"./FileUpload-rkQjDMkl.js";import{H as w}from"./HelpCard-BINCqYIf.js";import{U as ca}from"./UnifiedPageHeader-Cbwye_R6.js";import{c as oa}from"./certificates.service-DOwLiyPH.js";import{c as da}from"./cas.service-CAbj5j2-.js";import{s as W,a as u}from"./system.service-q0xuQUf8.js";import{u as ma}from"./usePermission-B5db8pNS.js";import"./CaretDown.es-DuThAI6u.js";import"./Fingerprint.es-a52JDt2Q.js";const ua=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,36H48A28,28,0,0,0,20,64V172a28,28,0,0,0,28,28h68v12H96a12,12,0,0,0,0,24h64a12,12,0,0,0,0-24H140V200h68a28,28,0,0,0,28-28V64A28,28,0,0,0,208,36ZM48,60H208a4,4,0,0,1,4,4v72H44V64A4,4,0,0,1,48,60ZM208,176H48a4,4,0,0,1-4-4V160H212v12A4,4,0,0,1,208,176Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,64v88H32V64A16,16,0,0,1,48,48H208A16,16,0,0,1,224,64Z",opacity:"0.2"}),a.createElement("path",{d:"M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40ZM48,56H208a8,8,0,0,1,8,8v80H40V64A8,8,0,0,1,48,56ZM208,184H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40Zm0,144H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,42H48A22,22,0,0,0,26,64V176a22,22,0,0,0,22,22h74v20H96a6,6,0,0,0,0,12h64a6,6,0,0,0,0-12H134V198h74a22,22,0,0,0,22-22V64A22,22,0,0,0,208,42ZM48,54H208a10,10,0,0,1,10,10v82H38V64A10,10,0,0,1,48,54ZM208,186H48a10,10,0,0,1-10-10V158H218v18A10,10,0,0,1,208,186Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40ZM48,56H208a8,8,0,0,1,8,8v80H40V64A8,8,0,0,1,48,56ZM208,184H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,44H48A20,20,0,0,0,28,64V176a20,20,0,0,0,20,20h76v24H96a4,4,0,0,0,0,8h64a4,4,0,0,0,0-8H132V196h76a20,20,0,0,0,20-20V64A20,20,0,0,0,208,44ZM48,52H208a12,12,0,0,1,12,12v84H36V64A12,12,0,0,1,48,52ZM208,188H48a12,12,0,0,1-12-12V156H220v20A12,12,0,0,1,208,188Z"}))]]),pa=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,44H32A12,12,0,0,0,20,56V192a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A12,12,0,0,0,224,44ZM193.15,68,128,127.72,62.85,68ZM44,188V83.28l75.89,69.57a12,12,0,0,0,16.22,0L212,83.28V188Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,56l-96,88L32,56Z",opacity:"0.2"}),a.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-8,144H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,50H32a6,6,0,0,0-6,6V192a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A6,6,0,0,0,224,50ZM208.58,62,128,135.86,47.42,62ZM216,194H40a2,2,0,0,1-2-2V69.64l86,78.78a6,6,0,0,0,8.1,0L218,69.64V192A2,2,0,0,1,216,194Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,52H32a4,4,0,0,0-4,4V192a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A4,4,0,0,0,224,52Zm-10.28,8L128,138.57,42.28,60ZM216,196H40a4,4,0,0,1-4-4V65.09L125.3,147a4,4,0,0,0,5.4,0L220,65.09V192A4,4,0,0,1,216,196Z"}))]]),ha=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,36H48A20,20,0,0,0,28,56V200a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,24v56H52V60ZM52,196V140H204v56ZM160,88a16,16,0,1,1,16,16A16,16,0,0,1,160,88Zm32,80a16,16,0,1,1-16-16A16,16,0,0,1,192,168Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,152v48a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152a8,8,0,0,1,8-8H208A8,8,0,0,1,216,152ZM208,48H48a8,8,0,0,0-8,8v48a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"}),a.createElement("path",{d:"M208,136H48a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A16,16,0,0,0,208,136Zm0,64H48V152H208v48Zm0-160H48A16,16,0,0,0,32,56v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,64H48V56H208v48ZM192,80a12,12,0,1,1-12-12A12,12,0,0,1,192,80Zm0,96a12,12,0,1,1-12-12A12,12,0,0,1,192,176Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,40H48A16,16,0,0,0,32,56v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM180,92a12,12,0,1,1,12-12A12,12,0,0,1,180,92Z"}),a.createElement("path",{d:"M208,136H48a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A16,16,0,0,0,208,136Zm-28,52a12,12,0,1,1,12-12A12,12,0,0,1,180,188Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,138H48a14,14,0,0,0-14,14v48a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V152A14,14,0,0,0,208,138Zm2,62a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V152a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56v48a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,62a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM190,80a10,10,0,1,1-10-10A10,10,0,0,1,190,80Zm0,96a10,10,0,1,1-10-10A10,10,0,0,1,190,176Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,136H48a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A16,16,0,0,0,208,136Zm0,64H48V152H208v48Zm0-160H48A16,16,0,0,0,32,56v48a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,64H48V56H208v48ZM192,80a12,12,0,1,1-12-12A12,12,0,0,1,192,80Zm0,96a12,12,0,1,1-12-12A12,12,0,0,1,192,176Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,140H48a12,12,0,0,0-12,12v48a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V152A12,12,0,0,0,208,140Zm4,60a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V152a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56v48a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,60a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-24,72a8,8,0,1,1-8-8A8,8,0,0,1,188,176Zm0-96a8,8,0,1,1-8-8A8,8,0,0,1,188,80Z"}))]]),xa=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M236.37,139.4a12,12,0,0,0-12-3A84.07,84.07,0,0,1,119.6,31.59a12,12,0,0,0-15-15A108.86,108.86,0,0,0,49.69,55.07,108,108,0,0,0,136,228a107.09,107.09,0,0,0,64.93-21.69,108.86,108.86,0,0,0,38.44-54.94A12,12,0,0,0,236.37,139.4Zm-49.88,47.74A84,84,0,0,1,68.86,69.51,84.93,84.93,0,0,1,92.27,48.29Q92,52.13,92,56A108.12,108.12,0,0,0,200,164q3.87,0,7.71-.27A84.79,84.79,0,0,1,186.49,187.14Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M227.89,147.89A96,96,0,1,1,108.11,28.11,96.09,96.09,0,0,0,227.89,147.89Z",opacity:"0.2"}),a.createElement("path",{d:"M233.54,142.23a8,8,0,0,0-8-2,88.08,88.08,0,0,1-109.8-109.8,8,8,0,0,0-10-10,104.84,104.84,0,0,0-52.91,37A104,104,0,0,0,136,224a103.09,103.09,0,0,0,62.52-20.88,104.84,104.84,0,0,0,37-52.91A8,8,0,0,0,233.54,142.23ZM188.9,190.34A88,88,0,0,1,65.66,67.11a89,89,0,0,1,31.4-26A106,106,0,0,0,96,56,104.11,104.11,0,0,0,200,160a106,106,0,0,0,14.92-1.06A89,89,0,0,1,188.9,190.34Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M235.54,150.21a104.84,104.84,0,0,1-37,52.91A104,104,0,0,1,32,120,103.09,103.09,0,0,1,52.88,57.48a104.84,104.84,0,0,1,52.91-37,8,8,0,0,1,10,10,88.08,88.08,0,0,0,109.8,109.8,8,8,0,0,1,10,10Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M232.13,143.64a6,6,0,0,0-6-1.49A90.07,90.07,0,0,1,113.86,29.85a6,6,0,0,0-7.49-7.48A102.88,102.88,0,0,0,54.48,58.68,102,102,0,0,0,197.32,201.52a102.88,102.88,0,0,0,36.31-51.89A6,6,0,0,0,232.13,143.64Zm-42,48.29a90,90,0,0,1-126-126A90.9,90.9,0,0,1,99.65,37.66,102.06,102.06,0,0,0,218.34,156.35,90.9,90.9,0,0,1,190.1,191.93Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M233.54,142.23a8,8,0,0,0-8-2,88.08,88.08,0,0,1-109.8-109.8,8,8,0,0,0-10-10,104.84,104.84,0,0,0-52.91,37A104,104,0,0,0,136,224a103.09,103.09,0,0,0,62.52-20.88,104.84,104.84,0,0,0,37-52.91A8,8,0,0,0,233.54,142.23ZM188.9,190.34A88,88,0,0,1,65.66,67.11a89,89,0,0,1,31.4-26A106,106,0,0,0,96,56,104.11,104.11,0,0,0,200,160a106,106,0,0,0,14.92-1.06A89,89,0,0,1,188.9,190.34Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M230.72,145.06a4,4,0,0,0-4-1A92.08,92.08,0,0,1,111.94,29.27a4,4,0,0,0-5-5A100.78,100.78,0,0,0,56.08,59.88a100,100,0,0,0,140,140,100.78,100.78,0,0,0,35.59-50.87A4,4,0,0,0,230.72,145.06ZM191.3,193.53A92,92,0,0,1,62.47,64.7a93,93,0,0,1,39.88-30.35,100.09,100.09,0,0,0,119.3,119.3A93,93,0,0,1,191.3,193.53Z"}))]]),ga=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M116,36V20a12,12,0,0,1,24,0V36a12,12,0,0,1-24,0Zm80,92a68,68,0,1,1-68-68A68.07,68.07,0,0,1,196,128Zm-24,0a44,44,0,1,0-44,44A44.05,44.05,0,0,0,172,128ZM51.51,68.49a12,12,0,1,0,17-17l-12-12a12,12,0,0,0-17,17Zm0,119-12,12a12,12,0,0,0,17,17l12-12a12,12,0,1,0-17-17ZM196,72a12,12,0,0,0,8.49-3.51l12-12a12,12,0,0,0-17-17l-12,12A12,12,0,0,0,196,72Zm8.49,115.51a12,12,0,0,0-17,17l12,12a12,12,0,0,0,17-17ZM48,128a12,12,0,0,0-12-12H20a12,12,0,0,0,0,24H36A12,12,0,0,0,48,128Zm80,80a12,12,0,0,0-12,12v16a12,12,0,0,0,24,0V220A12,12,0,0,0,128,208Zm108-92H220a12,12,0,0,0,0,24h16a12,12,0,0,0,0-24Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M184,128a56,56,0,1,1-56-56A56,56,0,0,1,184,128Z",opacity:"0.2"}),a.createElement("path",{d:"M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M122,40V16a6,6,0,0,1,12,0V40a6,6,0,0,1-12,0Zm68,88a62,62,0,1,1-62-62A62.07,62.07,0,0,1,190,128Zm-12,0a50,50,0,1,0-50,50A50.06,50.06,0,0,0,178,128ZM59.76,68.24a6,6,0,1,0,8.48-8.48l-16-16a6,6,0,0,0-8.48,8.48Zm0,119.52-16,16a6,6,0,1,0,8.48,8.48l16-16a6,6,0,1,0-8.48-8.48ZM192,70a6,6,0,0,0,4.24-1.76l16-16a6,6,0,0,0-8.48-8.48l-16,16A6,6,0,0,0,192,70Zm4.24,117.76a6,6,0,0,0-8.48,8.48l16,16a6,6,0,0,0,8.48-8.48ZM46,128a6,6,0,0,0-6-6H16a6,6,0,0,0,0,12H40A6,6,0,0,0,46,128Zm82,82a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V216A6,6,0,0,0,128,210Zm112-88H216a6,6,0,0,0,0,12h24a6,6,0,0,0,0-12Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M124,40V16a4,4,0,0,1,8,0V40a4,4,0,0,1-8,0Zm64,88a60,60,0,1,1-60-60A60.07,60.07,0,0,1,188,128Zm-8,0a52,52,0,1,0-52,52A52.06,52.06,0,0,0,180,128ZM61.17,66.83a4,4,0,0,0,5.66-5.66l-16-16a4,4,0,0,0-5.66,5.66Zm0,122.34-16,16a4,4,0,0,0,5.66,5.66l16-16a4,4,0,0,0-5.66-5.66ZM192,68a4,4,0,0,0,2.83-1.17l16-16a4,4,0,1,0-5.66-5.66l-16,16A4,4,0,0,0,192,68Zm2.83,121.17a4,4,0,0,0-5.66,5.66l16,16a4,4,0,0,0,5.66-5.66ZM40,124H16a4,4,0,0,0,0,8H40a4,4,0,0,0,0-8Zm88,88a4,4,0,0,0-4,4v24a4,4,0,0,0,8,0V216A4,4,0,0,0,128,212Zm112-88H216a4,4,0,0,0,0,8h24a4,4,0,0,0,0-8Z"}))]]),ue=a.forwardRef((i,r)=>a.createElement(S,{ref:r,...i,weights:ua}));ue.displayName="DesktopIcon";const ba=ue,pe=a.forwardRef((i,r)=>a.createElement(S,{ref:r,...i,weights:pa}));pe.displayName="EnvelopeSimpleIcon";const he=pe,xe=a.forwardRef((i,r)=>a.createElement(S,{ref:r,...i,weights:ha}));xe.displayName="HardDrivesIcon";const ge=xe,be=a.forwardRef((i,r)=>a.createElement(S,{ref:r,...i,weights:xa}));be.displayName="MoonIcon";const fa=be,fe=a.forwardRef((i,r)=>a.createElement(S,{ref:r,...i,weights:ga}));fe.displayName="SunIcon";const ya=fe,ce=[{id:"general",label:"General",icon:Y},{id:"appearance",label:"Appearance",icon:oe},{id:"email",label:"Email",icon:he},{id:"security",label:"Security",icon:z},{id:"backup",label:"Backup",icon:B},{id:"audit",label:"Audit",icon:me},{id:"database",label:"Database",icon:ge},{id:"https",label:"HTTPS",icon:de}];function ja(){const{themeFamily:i,setThemeFamily:r,mode:h,setMode:U,themes:k}=sa(),j=[{id:"system",label:"Follow System",icon:ba,description:"Automatically switch based on your OS settings"},{id:"light",label:"Light",icon:ya,description:"Always use light theme"},{id:"dark",label:"Dark",icon:fa,description:"Always use dark theme"}];return e.jsxs(b,{children:[e.jsx(f,{icon:oe,title:"Appearance",subtitle:"Customize the look and feel of UCM"}),e.jsxs(o,{title:"Color Theme",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Choose a color scheme that suits your preference"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:k.map(n=>e.jsxs("button",{onClick:()=>r(n.id),className:`
                p-4 rounded-lg border-2 transition-all text-left
                ${i===n.id?"border-accent-primary bg-accent-primary/10":"border-border hover:border-text-tertiary bg-bg-tertiary/50"}
              `,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full shadow-inner",style:{background:n.accent}}),e.jsx("span",{className:"font-medium text-sm text-text-primary",children:n.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-6 h-3 rounded-sm",style:{background:n.dark["bg-primary"]}}),e.jsx("div",{className:"w-6 h-3 rounded-sm",style:{background:n.dark["bg-secondary"]}}),e.jsx("div",{className:"w-6 h-3 rounded-sm",style:{background:n.light["bg-primary"]}}),e.jsx("div",{className:"w-6 h-3 rounded-sm",style:{background:n.light["bg-secondary"]}})]})]},n.id))})]}),e.jsxs(o,{title:"Appearance Mode",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Control how the interface brightness adapts"}),e.jsx("div",{className:"space-y-2",children:j.map(n=>{const I=n.icon;return e.jsxs("button",{onClick:()=>U(n.id),className:`
                  w-full p-4 rounded-lg border-2 transition-all text-left flex items-center gap-4
                  ${h===n.id?"border-accent-primary bg-accent-primary/10":"border-border hover:border-text-tertiary bg-bg-tertiary/50"}
                `,children:[e.jsx("div",{className:`
                  w-10 h-10 rounded-lg flex items-center justify-center
                  ${h===n.id?"bg-accent-primary text-white":"bg-bg-secondary text-text-secondary"}
                `,children:e.jsx(I,{size:20,weight:h===n.id?"fill":"regular"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-text-primary",children:n.label}),e.jsx("div",{className:"text-xs text-text-tertiary",children:n.description})]}),h===n.id&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-accent-primary flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},n.id)})})]}),e.jsx(o,{title:"Preview",children:e.jsxs("div",{className:"p-4 rounded-lg bg-bg-tertiary border border-border",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Current settings:"}),e.jsxs("p",{className:"text-text-primary",children:[e.jsx("span",{className:"font-medium",children:k.find(n=>n.id===i)?.name})," · ",e.jsx("span",{className:"text-text-secondary",children:h==="system"?"Following system preference":h==="dark"?"Dark mode":"Light mode"})]})]})})]})}function $a(){const{showSuccess:i,showError:r,showConfirm:h,showPrompt:U}=Je(),{canWrite:k,hasPermission:j}=ma(),[n,I]=ra(),[ye,K]=a.useState(!0),[H,Q]=a.useState(!1),[l,J]=a.useState({}),[X,je]=a.useState([]),[M,ve]=a.useState(null),[x,Ae]=a.useState(null),[ee,we]=a.useState([]),[E,ke]=a.useState(""),[va,He]=a.useState([]),[ae,Ce]=a.useState([]),[$,Ze]=a.useState(n.get("tab")||"general"),Se=s=>{Ze(s),s==="general"?n.delete("tab"):n.set("tab",s),I(n,{replace:!0})},[Me,N]=a.useState(!1),[Ee,V]=a.useState(!1),[v,_]=a.useState(""),[A,T]=a.useState(""),[F,L]=a.useState(null),[P,R]=a.useState(!1);a.useEffect(()=>{Xe(()=>import("./settings-DbRG-wdj.js").then(s=>s.s),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(s=>Ce(s.proSettingsCategories||[])).catch(()=>{})},[]);const te=a.useMemo(()=>[...ce.slice(0,4),...ae,...ce.slice(4)],[ae]);a.useEffect(()=>{Ne(),O(),_e(),Ve(),Fe(),Te()},[]);const Ne=async()=>{K(!0);try{const s=await W.getAll();J(s.data||s||{})}catch(s){r(s.message||"Failed to load settings")}finally{K(!1)}},Ve=async()=>{try{const s=await da.getAll();He(s.data||[])}catch(s){console.error("Failed to load CAs:",s)}},O=async()=>{try{const s=await u.listBackups();je(s.data||[])}catch(s){console.error("Failed to load backups:",s)}},_e=async()=>{try{const s=await u.getHttpsCertInfo();Ae(s.data||{})}catch(s){console.error("Failed to load HTTPS cert info:",s)}},Te=async()=>{try{const t=(await u.getDatabaseStats()).data||{};ve({certificates:t.counts?.certificates||0,cas:t.counts?.cas||0,size:t.size_mb?`${t.size_mb} MB`:"-",last_optimized:t.last_vacuum||"Never"})}catch(s){console.error("Failed to load database stats:",s)}},Fe=async()=>{try{const t=((await oa.getAll({status:"valid"})).data||[]).filter(d=>d.has_private_key&&d.status==="valid"&&new Date(d.valid_to)>new Date);we(t)}catch(s){console.error("Failed to load certificates:",s)}},C=async s=>{Q(!0);try{await W.updateBulk(l),i("Settings saved successfully")}catch(t){r(t.message||"Failed to save settings")}finally{Q(!1)}},Le=async()=>{try{await W.testEmail(l.admin_email),i("Test email sent successfully")}catch(s){r(s.message||"Failed to send test email")}},Pe=async()=>{if(!v||v.length<12){r("Password must be at least 12 characters");return}R(!0);try{const s=await u.backup(v);if(s.data){const t=await u.downloadBackup(s.data.filename),d=URL.createObjectURL(t),y=document.createElement("a");y.href=d,y.download=s.data.filename,y.click(),URL.revokeObjectURL(d),i("Backup created and downloaded successfully"),N(!1),_(""),O()}}catch(s){r(s.message||"Failed to create backup")}finally{R(!1)}},Re=async s=>{try{const t=await u.downloadBackup(s),d=URL.createObjectURL(t),y=document.createElement("a");y.href=d,y.download=s,y.click(),URL.revokeObjectURL(d),i("Backup downloaded successfully")}catch(t){r(t.message||"Failed to download backup")}},De=async s=>{if(await h(`Delete backup "${s}"?`,{title:"Delete Backup",confirmText:"Delete",variant:"danger"}))try{await u.deleteBackup(s),i("Backup deleted successfully"),O()}catch(d){r(d.message||"Failed to delete backup")}},ze=async()=>{if(!F){r("Please select a backup file");return}if(!A||A.length<12){r("Password must be at least 12 characters");return}R(!0);try{const s=await u.restore(F,A);i(`Backup restored successfully: ${s.data?.users||0} users, ${s.data?.cas||0} CAs, ${s.data?.certificates||0} certificates`),V(!1),T(""),L(null),setTimeout(()=>window.location.reload(),2e3)}catch(s){r(s.message||"Failed to restore backup")}finally{R(!1)}},Be=async()=>{try{await u.optimizeDatabase(),i("Database optimized successfully")}catch(s){r(s.message||"Failed to optimize database")}},Ue=async()=>{try{const s=await u.integrityCheck();s.passed?i("Database integrity check passed"):r(`Integrity check found ${s.errors} errors`)}catch(s){r(s.message||"Failed to check database integrity")}},Ie=async()=>{try{const s=await u.exportDatabase(),t=URL.createObjectURL(s),d=document.createElement("a");d.href=t,d.download=`ucm-database-${new Date().toISOString().split("T")[0]}.sql`,d.click(),i("Database exported successfully")}catch(s){r(s.message||"Failed to export database")}},$e=async()=>{if(!await h("⚠️ WARNING: This will DELETE ALL DATA and reset the database to initial state. Are you absolutely sure?",{title:"Reset Database",confirmText:"Continue",variant:"danger"}))return;if(await U("Type YES to confirm database reset:",{title:"Final Confirmation",placeholder:"YES"})!=="YES"){r("Database reset cancelled");return}try{await u.resetDatabase(),i("Database reset successfully. Page will reload."),setTimeout(()=>window.location.reload(),2e3)}catch(d){r(d.message||"Failed to reset database")}},Oe=async()=>{if(!E){r("Please select a certificate");return}if(await h("Apply selected certificate as HTTPS certificate? This will restart the server.",{title:"Apply Certificate",confirmText:"Apply & Restart"}))try{await u.applyHttpsCert({cert_id:E}),i("HTTPS certificate applied. Server will restart."),setTimeout(()=>window.location.reload(),3e3)}catch(t){r(t.message||"Failed to apply certificate")}},qe=async()=>{if(await h("Regenerate HTTPS certificate? This will restart the server.",{title:"Regenerate Certificate",confirmText:"Regenerate & Restart"}))try{await u.regenerateHttpsCert({common_name:window.location.hostname,validity_days:365}),i("HTTPS certificate regenerated. Server will restart."),setTimeout(()=>window.location.reload(),3e3)}catch(t){r(t.message||"Failed to regenerate HTTPS certificate")}},c=(s,t)=>{J(d=>({...d,[s]:t}))},Ge=()=>{switch($){case"general":return e.jsxs(b,{children:[e.jsx(f,{icon:Y,title:"General Settings",subtitle:"System name, URL, timezone configuration",actions:k("settings")?[{label:"Save Changes",icon:Z,onClick:()=>C(),disabled:H}]:[]}),e.jsx(o,{title:"System Configuration",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"System Name",value:l.system_name||"",onChange:t=>c("system_name",t.target.value),helperText:"Display name for the UCM system"}),e.jsx(m,{label:"Base URL",value:l.base_url||"",onChange:t=>c("base_url",t.target.value),placeholder:"https://ucm.example.com",helperText:"Public URL of this UCM instance"})]})}),e.jsx(o,{title:"Session & Timezone",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Session Timeout (minutes)",type:"number",value:l.session_timeout||30,onChange:t=>c("session_timeout",parseInt(t.target.value)),min:"5",max:"1440"}),e.jsx(G,{label:"Timezone",options:[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"America/New York"},{value:"Europe/Paris",label:"Europe/Paris"},{value:"Asia/Tokyo",label:"Asia/Tokyo"}],value:l.timezone||"UTC",onChange:t=>c("timezone",t)})]})})]});case"appearance":return e.jsx(ja,{});case"email":return e.jsxs(b,{children:[e.jsx(f,{icon:he,title:"Email Settings",subtitle:"SMTP server configuration for notifications",actions:k("settings")?[{label:"Test Email",icon:la,onClick:Le,variant:"secondary"},{label:"Save Changes",icon:Z,onClick:()=>C(),disabled:H}]:[]}),e.jsx(o,{title:"SMTP Server",children:e.jsxs(D,{children:[e.jsx("div",{className:"col-span-full md:col-span-1",children:e.jsx(m,{label:"SMTP Host",value:l.smtp_host||"",onChange:t=>c("smtp_host",t.target.value),placeholder:"smtp.example.com"})}),e.jsx("div",{className:"col-span-full md:col-span-1",children:e.jsx(m,{label:"SMTP Port",type:"number",value:l.smtp_port||587,onChange:t=>c("smtp_port",parseInt(t.target.value))})})]})}),e.jsx(o,{title:"Authentication",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"SMTP Username",value:l.smtp_username||"",onChange:t=>c("smtp_username",t.target.value)}),e.jsx(m,{label:"SMTP Password",type:"password",value:l.smtp_password||"",onChange:t=>c("smtp_password",t.target.value),placeholder:"••••••••"})]})}),e.jsx(o,{title:"Email Options",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"From Email",type:"email",value:l.smtp_from_email||"",onChange:t=>c("smtp_from_email",t.target.value),placeholder:"noreply@example.com"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.smtp_use_tls||!1,onChange:t=>c("smtp_use_tls",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsx("span",{className:"text-sm text-text-primary",children:"Use TLS/STARTTLS"})]})]})})]});case"security":return e.jsxs(b,{children:[e.jsx(f,{icon:z,title:"Security Settings",subtitle:"Password, 2FA, sessions configuration",actions:j("admin:system")?[{label:"Save Changes",icon:Z,onClick:()=>C(),disabled:H}]:[]}),e.jsx(o,{title:"Two-Factor Authentication",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.enforce_2fa||!1,onChange:t=>c("enforce_2fa",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Enforce Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Require all users to enable 2FA"})]})]})}),e.jsx(o,{title:"Password Policy",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Minimum Password Length",type:"number",value:l.min_password_length||8,onChange:t=>c("min_password_length",parseInt(t.target.value)),min:"6",max:"32"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.password_require_uppercase||!1,onChange:t=>c("password_require_uppercase",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsx("span",{className:"text-sm text-text-primary",children:"Require uppercase letters"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.password_require_numbers||!1,onChange:t=>c("password_require_numbers",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsx("span",{className:"text-sm text-text-primary",children:"Require numbers"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.password_require_special||!1,onChange:t=>c("password_require_special",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsx("span",{className:"text-sm text-text-primary",children:"Require special characters"})]})]})]})}),e.jsx(o,{title:"Session & Rate Limits",children:e.jsxs(D,{children:[e.jsx("div",{className:"col-span-full md:col-span-1",children:e.jsx(m,{label:"Session Duration (hours)",type:"number",value:l.session_duration||24,onChange:t=>c("session_duration",parseInt(t.target.value)),min:"1",max:"720"})}),e.jsx("div",{className:"col-span-full md:col-span-1",children:e.jsx(m,{label:"API Rate Limit (requests/minute)",type:"number",value:l.api_rate_limit||60,onChange:t=>c("api_rate_limit",parseInt(t.target.value)),min:"10",max:"1000"})})]})})]});case"backup":return e.jsxs(b,{children:[e.jsx(f,{icon:B,title:"Backup & Restore",subtitle:"Data backup and recovery options",actions:j("admin:system")?[{label:"Create Backup",icon:B,onClick:()=>N(!0)}]:[]}),e.jsx(o,{title:"Automatic Backups",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.auto_backup_enabled||!1,onChange:t=>c("auto_backup_enabled",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Enable Automatic Backups"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Daily encrypted backups saved to /opt/ucm/data/backups"})]})]}),l.auto_backup_enabled&&e.jsxs(e.Fragment,{children:[e.jsx(G,{label:"Backup Frequency",options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],value:l.backup_frequency||"daily",onChange:t=>c("backup_frequency",t)}),e.jsx(m,{label:"Auto-Backup Password",type:"password",value:l.backup_password||"",onChange:t=>c("backup_password",t.target.value),placeholder:"Min 12 characters",helperText:"Password used to encrypt automatic backups"}),e.jsx(m,{label:"Retention Period (days)",type:"number",value:l.backup_retention_days||30,onChange:t=>c("backup_retention_days",parseInt(t.target.value)),min:"1",max:"365"})]}),j("admin:system")&&e.jsxs(p,{size:"sm",onClick:()=>C(),disabled:H,children:[e.jsx(Z,{size:16}),"Save Settings"]})]})}),e.jsx(o,{title:"Available Backups",children:X.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"No backups found"}),e.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:"Create a backup to protect your data"})]}):e.jsx("div",{className:"space-y-2",children:X.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary/50 border border-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:t.filename}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:t.size}),e.jsx("p",{className:"text-xs text-text-secondary",children:t.created_at})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>Re(t.filename),children:e.jsx(re,{size:14})}),e.jsx(p,{size:"sm",variant:"danger",onClick:()=>De(t.filename),children:e.jsx(le,{size:14})})]})]},t.filename))})}),e.jsx(o,{title:"Restore from Backup",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary mb-4",children:"Upload a .ucmbkp file to restore all data"}),e.jsx(ie,{accept:".ucmbkp,.tar.gz",onFileSelect:t=>{L(t),V(!0)},helperText:"Select backup file (encrypted .ucmbkp)"})]})})]});case"audit":return e.jsxs(b,{children:[e.jsx(f,{icon:me,title:"Audit Log Settings",subtitle:"Logging configuration and retention",actions:j("admin:system")?[{label:"Save Changes",icon:Z,onClick:()=>C(),disabled:H}]:[]}),e.jsx(o,{title:"Audit Logging",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.audit_enabled||!0,onChange:t=>c("audit_enabled",t.target.checked),className:"rounded border-border bg-bg-tertiary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Enable Audit Logging"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Log all system activities"})]})]}),e.jsx(m,{label:"Log Retention (days)",type:"number",value:l.audit_retention_days||90,onChange:t=>c("audit_retention_days",parseInt(t.target.value)),min:"7",max:"730",disabled:!l.audit_enabled})]})}),e.jsx(o,{title:"Events to Log",children:e.jsx("div",{className:"space-y-2",children:["User Login/Logout","Certificate Issue/Revoke","CA Create/Delete","Settings Changes","User Management"].map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!l.audit_enabled,className:"rounded border-border bg-bg-tertiary"}),e.jsx("span",{className:"text-sm text-text-primary",children:t})]},t))})})]});case"database":return e.jsxs(b,{children:[e.jsx(f,{icon:ge,title:"Database Management",subtitle:"Database statistics and maintenance"}),e.jsx(o,{title:"Database Statistics",children:e.jsxs(D,{children:[e.jsx(g,{label:"Total Certificates",value:M?.certificates||"-"}),e.jsx(g,{label:"Certificate Authorities",value:M?.cas||"-"}),e.jsx(g,{label:"Database Size",value:M?.size||"-"}),e.jsx(g,{label:"Last Optimized",value:M?.last_optimized||"-"})]})}),e.jsx(o,{title:"Maintenance",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(p,{size:"sm",variant:"secondary",onClick:Be,children:[e.jsx(B,{size:16}),"Optimize Database"]}),e.jsxs(p,{size:"sm",variant:"secondary",onClick:Ue,children:[e.jsx(z,{size:16}),"Integrity Check"]}),e.jsxs(p,{size:"sm",variant:"secondary",onClick:Ie,children:[e.jsx(re,{size:16}),"Export Database"]})]})})}),e.jsx(o,{title:"Danger Zone",className:"mt-4",children:e.jsxs("div",{className:"p-4 status-danger-bg status-danger-border border rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-400 mb-2",children:"⚠️ Database Reset"}),e.jsx("p",{className:"text-xs text-text-secondary mb-3",children:"Reset database to initial state. This will DELETE ALL certificates, CAs, users, and settings."}),e.jsxs(p,{variant:"danger",size:"sm",onClick:$e,children:[e.jsx(le,{size:16}),"Reset Database"]})]})})]});case"https":return e.jsxs(b,{children:[e.jsx(f,{icon:de,title:"HTTPS Certificate Management",subtitle:"SSL/TLS certificate for secure connections",badge:x?.type&&e.jsx(ia,{variant:x?.type==="CA-Signed"?"success":x?.type==="Self-Signed"?"warning":"secondary",children:x?.type})}),e.jsx(o,{title:"Current Certificate",children:e.jsxs(D,{children:[e.jsx(g,{label:"Common Name",value:x?.common_name||window.location.hostname}),e.jsx(g,{label:"Issuer",value:x?.issuer||"-"}),e.jsx(g,{label:"Valid From",value:q(x?.valid_from)}),e.jsx(g,{label:"Valid Until",value:q(x?.valid_to)}),e.jsx(g,{label:"Fingerprint (SHA256)",value:x?.fingerprint||"-",mono:!0,copyable:!0,fullWidth:!0})]})}),e.jsx(o,{title:"Use UCM Certificate",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:"Apply an existing certificate from UCM as the HTTPS certificate. Only valid certificates with private keys are shown."}),e.jsx(G,{label:"Select Certificate",value:E,onChange:ke,placeholder:"Choose a certificate...",options:ee.map(t=>({value:t.id,label:`${t.common_name||"Certificate"} (expires ${q(t.valid_to)})`}))}),ee.length===0&&e.jsx("p",{className:"text-xs text-text-secondary",children:"No valid certificates with private keys found. Issue a certificate first."}),e.jsxs(p,{variant:"secondary",size:"sm",onClick:Oe,disabled:!E,children:[e.jsx(z,{size:16}),"Apply Selected Certificate"]})]})}),e.jsx(o,{title:"Regenerate Certificate",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:"Generate a new self-signed HTTPS certificate. The server will restart automatically."}),e.jsxs(p,{variant:"secondary",size:"sm",onClick:qe,children:[e.jsx(ta,{size:16}),"Regenerate Self-Signed Certificate"]})]})}),e.jsx(o,{title:"Apply Custom Certificate",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-text-secondary",children:"Upload your own certificate and private key (PEM format)."}),e.jsx(ie,{accept:".pem,.crt,.key",onFileSelect:t=>{r("Feature coming soon: Upload custom HTTPS certificate")},helperText:"Select certificate or key file (PEM format)"})]})})]});default:const s=te.find(t=>t.id===$&&t.component);if(s?.component){const t=s.component;return e.jsx(t,{})}return null}},We=e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{variant:"info",title:"General Settings",children:"Configure your UCM instance name, base URL, session timeout, and timezone. These settings affect all users and system behavior."}),e.jsx(w,{variant:"tip",title:"Email Configuration",children:"Configure SMTP settings to enable email notifications for certificate expiration alerts and system events. Test your configuration before saving."}),e.jsx(w,{variant:"warning",title:"Security Settings",children:"Security settings like 2FA enforcement and password policies affect all users. Changes take effect immediately - users may need to update their credentials."}),e.jsx(w,{variant:"info",title:"Backup & Restore",children:"Create encrypted backups of all data including certificates, CAs, users, and settings. Store backup passwords securely - they cannot be recovered."}),e.jsx(w,{variant:"tip",title:"Database Management",children:"Optimize database performance, check integrity, or export data. The danger zone allows complete database reset - use with extreme caution."}),e.jsx(w,{variant:"info",title:"HTTPS Certificate",children:"Manage the SSL/TLS certificate used by UCM. You can use a certificate from your PKI or generate a self-signed certificate for testing."})]}),[Ye,se]=a.useState(!1),{isMobile:Ke}=ea();if(ye)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(aa,{message:"Loading settings..."})});const Qe=te.map(s=>({id:s.id,label:s.label,icon:s.icon,badge:s.pro?{label:"Pro",variant:"info"}:void 0}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col h-full w-full",children:[e.jsx(ca,{icon:Y,title:"Settings",subtitle:"System configuration",tabs:Qe,activeTab:$,onTabChange:Se,showHelp:!0,onHelpClick:()=>se(!0),isMobile:Ke}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:Ge()})})]}),e.jsx(na,{open:Ye,onClose:()=>se(!1),title:"Settings Help",children:We}),e.jsx(ne,{open:Me,onClose:()=>{N(!1),_("")},title:"Create Encrypted Backup",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Create a backup containing all data (database, certificates, CAs, users, configuration). The backup will be encrypted with your password."}),e.jsx(m,{label:"Encryption Password",type:"password",value:v,onChange:s=>_(s.target.value),placeholder:"Minimum 12 characters",helperText:"Use a strong password - you'll need it to restore the backup",autoFocus:!0}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx(p,{variant:"secondary",onClick:()=>{N(!1),_("")},children:"Cancel"}),e.jsx(p,{onClick:Pe,disabled:P||!v||v.length<12,children:P?"Creating...":"Create & Download"})]})]})}),e.jsx(ne,{open:Ee,onClose:()=>{V(!1),T(""),L(null)},title:"Restore from Backup",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 status-warning-bg status-warning-border border rounded-lg",children:[e.jsx("p",{className:"text-sm status-warning-text font-medium",children:"⚠️ Warning"}),e.jsx("p",{className:"text-xs status-warning-text opacity-80",children:"This will REPLACE ALL current data with the backup contents. This action cannot be undone."})]}),F&&e.jsxs("p",{className:"text-sm text-text-primary",children:["File: ",e.jsx("strong",{children:F.name})]}),e.jsx(m,{label:"Backup Password",type:"password",value:A,onChange:s=>T(s.target.value),placeholder:"Enter the password used to create the backup",autoFocus:!0}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx(p,{variant:"secondary",onClick:()=>{V(!1),T(""),L(null)},children:"Cancel"}),e.jsx(p,{variant:"danger",onClick:ze,disabled:P||!A||A.length<12,children:P?"Restoring...":"Restore Backup"})]})]})})]})}export{$a as default};
