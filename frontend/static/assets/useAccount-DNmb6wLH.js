import{u as i}from"./useQuery-DUZfcy7q.js";import{a as o}from"./api-ClVrI7m4.js";const p={getProfile:async()=>(await o.get("/api/v2/account/profile")).data||{},updateProfile:async e=>(await o.patch("/api/v2/account/profile",e)).data,changePassword:async(e,n)=>(await o.post("/api/v2/account/password",{current_password:e,new_password:n})).data,getActivity:async(e={})=>{const n=await o.get("/api/v2/account/activity",{params:e}),c=(n.data||[]).map(s=>{const r=s.action||s.event||"",u=s.category||(r.includes("certificate")||r.includes("ca")||r.includes("csr")?"pki":"app"),t=s.type||s.severity||(r.includes("error")||r.includes("failed")?"error":r.includes("warn")?"warning":"info"),l=s.icon||(t==="error"?"ph-x-circle":t==="warning"?"ph-warning":t==="success"?"ph-check-circle":"ph-info");return{id:s.id,category:u,type:t,icon:l,text:s.message||s.description||r,time:s.timestamp||s.created_at||"N/A",user:s.user||s.username||"System",_raw:s}});return{data:c,meta:n.meta||{page:1,per_page:50,total:c.length}}},getSessions:async()=>(await o.get("/api/v2/account/sessions")).data||[],revokeSession:async e=>(await o.delete(`/api/v2/account/sessions/${e}`)).data},a={all:["account"],profile:()=>[...a.all,"profile"],activity:e=>[...a.all,"activity",e],sessions:()=>[...a.all,"sessions"]},y=()=>i({queryKey:a.profile(),queryFn:p.getProfile}),f=(e={})=>i({queryKey:a.activity(e),queryFn:()=>p.getActivity(e)}),w=()=>i({queryKey:a.sessions(),queryFn:p.getSessions});export{y as a,w as b,f as u};
