import{r as w,j as e}from"./index-CJyg2ElZ.js";import{P as h}from"./PageTopBar-DGtZViRP.js";import{S as F,a as i}from"./StatsGrid-XdfQPVQb.js";import{S as R,T as b}from"./SectionTabs-DSzIPKNJ.js";import{D as x}from"./DataTable-DdzkuD2j.js";import{S as K}from"./SearchToolbar-BCFTftRP.js";import{B as l}from"./Badge-CXwHQQqq.js";import{g as y}from"./getBadgeVariant-BF98r0-3.js";import{a as c,u as d}from"./api-DgiOdvWY.js";import"./Input-BxtS_wD2.js";const u={getSettings:async()=>(await c.get("/api/v2/acme/settings")).data,updateSettings:async t=>(await c.patch("/api/v2/acme/settings",t)).data,getStats:async()=>(await c.get("/api/v2/acme/stats")).data,getAccounts:async(t={})=>(await c.get("/api/v2/acme/accounts",{params:t})).data||[],getOrders:async(t={})=>(await c.get("/api/v2/acme/orders",{params:t})).data||[]},r={all:["acme"],settings:()=>[...r.all,"settings"],stats:()=>[...r.all,"stats"],accounts:t=>[...r.all,"accounts",t],orders:t=>[...r.all,"orders",t]},B=()=>d({queryKey:r.settings(),queryFn:u.getSettings}),P=()=>d({queryKey:r.stats(),queryFn:u.getStats}),I=(t={})=>d({queryKey:r.accounts(t),queryFn:()=>u.getAccounts(t)}),V=(t={})=>d({queryKey:r.orders(t),queryFn:()=>u.getOrders(t)}),G="_acmeDashboard_k0xpk_3",Q="_tabContent_k0xpk_8",z="_section_k0xpk_14",H="_sectionTitle_k0xpk_20",a={acmeDashboard:G,tabContent:Q,section:z,sectionTitle:H};function oe(){const[t,o]=w.useState("internal"),{data:J,isLoading:v,error:j}=B(),{data:U,isLoading:A,error:C}=P(),{data:S,isLoading:k,error:E}=I(),{data:f,isLoading:T,error:O}=V(),D=v||A||k||T,p=j||C||E||O,_=[{key:"email",label:"Email",sortable:!0},{key:"status",label:"Status",sortable:!0,render:s=>e.jsx(l,{variant:y("acme-status",s.status),children:s.status})},{key:"createdAt",label:"Created At",sortable:!0},{key:"orders",label:"Orders",sortable:!0,render:s=>e.jsx("span",{style:{color:"var(--text-tertiary)"},children:s.orders})}],N=[{key:"domain",label:"Domain",sortable:!0},{key:"account",label:"Account",sortable:!0},{key:"status",label:"Status",sortable:!0,render:s=>e.jsx(l,{variant:y("acme-status",s.status),children:s.status})},{key:"createdAt",label:"Created",sortable:!0},{key:"expiresAt",label:"Expires",sortable:!0}],M=[{label:"Status",options:["All Statuses","Valid","Pending","Invalid"]}],q=[{label:"New Account",icon:"ph ph-plus",variant:"primary"},{label:"New Order",icon:"ph ph-certificate",variant:"default"}];if(D)return e.jsxs("div",{className:a.acmeDashboard,children:[e.jsx(h,{icon:"ph ph-globe",title:"ACME",badge:e.jsx(l,{variant:"neutral",children:"Loading..."})}),e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading ACME data..."})]});if(p)return e.jsxs("div",{className:a.acmeDashboard,children:[e.jsx(h,{icon:"ph ph-globe",title:"ACME",badge:e.jsx(l,{variant:"danger",children:"Error"})}),e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--color-danger)"},children:["Error loading ACME data: ",p.message]})]});const m={accounts:S?.data||[],orders:f?.data||[]},g=(s,W)=>e.jsxs("div",{className:a.tabContent,children:[e.jsxs(F,{columns:4,children:[e.jsx(i,{value:s.stats.accounts,label:"Accounts",icon:"ph ph-user"}),e.jsx(i,{value:s.stats.activeOrders,label:"Active Orders",icon:"ph ph-clock"}),e.jsx(i,{value:s.stats.completedOrders,label:"Completed Orders",icon:"ph ph-check-circle"}),e.jsx(i,{value:s.stats.domains,label:"Domains",icon:"ph ph-globe"})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Accounts"}),e.jsx(K,{placeholder:"Search accounts...",filters:M,actions:q,onSearch:n=>console.log("Search:",n),onFilterChange:(n,L)=>console.log("Filter:",n,L)}),e.jsx(x,{columns:_,data:s.accounts,onRowClick:n=>console.log("Account clicked:",n)})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Recent Orders"}),e.jsx(x,{columns:N,data:s.orders,onRowClick:n=>console.log("Order clicked:",n)})]})]});return e.jsxs("div",{className:a.acmeDashboard,children:[e.jsxs(R,{children:[e.jsx(b,{active:t==="internal",onClick:()=>o("internal"),children:"Internal ACME"}),e.jsx(b,{active:t==="letsencrypt",onClick:()=>o("letsencrypt"),children:"Let's Encrypt"})]}),e.jsxs("div",{className:a.tabContent,children:[t==="internal"&&g(m.internal),t==="letsencrypt"&&g(m.letsencrypt)]})]})}export{oe as ACMEDashboard,oe as default};
