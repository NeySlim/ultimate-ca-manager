import{r as h,j as e,B as x}from"./index-DbMVyzJo.js";import{P as p}from"./PageTopBar-Cw9Co4CJ.js";import{F as E,a as j}from"./FiltersBar-BCPurj2P.js";import{P as f,a as n}from"./PillFilter-qNMzvaXa.js";import{B as i}from"./Badge-Cip0ieme.js";import{a as d,u as w}from"./api-l2ERiPny.js";const I={getAll:async(a={})=>await d.get("/api/v2/certificates",{params:a}),getById:async a=>(await d.get(`/api/v2/certificates/${a}`)).data,revoke:async(a,r)=>(await d.post(`/api/v2/certificates/${a}/revoke`,{reason:r})).data,renew:async a=>(await d.post(`/api/v2/certificates/${a}/renew`)).data,download:async(a,r="pem")=>await d.get(`/api/v2/certificates/${a}/download`,{params:{format:r},responseType:"blob"})},o={all:["certificates"],lists:()=>[...o.all,"list"],list:a=>[...o.lists(),a],details:()=>[...o.all,"detail"],detail:a=>[...o.details(),a]},T=(a={})=>w({queryKey:o.list(a),queryFn:()=>I.getAll(a)}),A="_tableContainer_2f75z_2",B="_certNameCell_2f75z_45",k="_certName_2f75z_45",z="_certSerial_2f75z_56",F="_badgeType_2f75z_63",L="_badgeInfo_2f75z_74",R="_badgeNeutral_2f75z_79",$="_badgeStatus_2f75z_84",P="_badgeSuccess_2f75z_95",D="_badgeWarning_2f75z_100",O="_badgeError_2f75z_105",W="_expiresCell_2f75z_111",U="_badgeDays_2f75z_117",K="_actionsCell_2f75z_130",M="_actionBtn_2f75z_135",t={tableContainer:A,certNameCell:B,certName:k,certSerial:z,badgeType:F,badgeInfo:L,badgeNeutral:R,badgeStatus:$,badgeSuccess:P,badgeWarning:D,badgeError:O,expiresCell:W,badgeDays:U,actionsCell:K,actionBtn:M};function H(){const[a,r]=h.useState("all"),[l,c]=h.useState("all"),[v,m]=h.useState("name"),{data:b,isLoading:y,error:g}=T(),C=s=>s<=7?t.badgeError:s<=30?t.badgeWarning:t.badgeSuccess,_=s=>s==="CRITICAL"?t.badgeError:s==="EXPIRING SOON"?t.badgeWarning:t.badgeSuccess,S=s=>s==="Server"||s==="Client"?t.badgeInfo:t.badgeNeutral;if(y)return e.jsxs("div",{className:t.certificateList,children:[e.jsx(p,{icon:"ph ph-certificate",title:"Certificates",badge:e.jsx(i,{variant:"neutral",children:"Loading..."})}),e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading certificates..."})]});if(g)return e.jsxs("div",{className:t.certificateList,children:[e.jsx(p,{icon:"ph ph-certificate",title:"Certificates",badge:e.jsx(i,{variant:"danger",children:"Error"})}),e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--color-danger)"},children:["Error loading certificates: ",g.message]})]});const u=b?.data||[],N=u.filter(s=>s.status==="ACTIVE").length;return e.jsxs("div",{className:t.certificateList,children:[e.jsx(p,{icon:"ph ph-certificate",title:"Certificates",badge:e.jsxs(i,{variant:"success",children:[N," Active"]}),actions:e.jsxs(e.Fragment,{children:[e.jsx(x,{icon:"ph ph-upload-simple",children:"Import"}),e.jsx(x,{icon:"ph ph-download-simple",children:"Export"}),e.jsx(x,{variant:"primary",icon:"ph ph-file-plus",children:"Issue Certificate"})]})}),e.jsxs(E,{children:[e.jsx(j,{label:"TYPE",children:e.jsxs(f,{children:[e.jsxs(n,{active:a==="all",onClick:()=>r("all"),children:["All ",e.jsx(i,{variant:"secondary",children:"(247)"})]}),e.jsxs(n,{active:a==="server",onClick:()=>r("server"),children:["Server ",e.jsx(i,{variant:"secondary",children:"(89)"})]}),e.jsxs(n,{active:a==="client",onClick:()=>r("client"),children:["Client ",e.jsx(i,{variant:"secondary",children:"(158)"})]}),e.jsxs(n,{active:a==="acme",onClick:()=>r("acme"),children:["ACME ",e.jsx(i,{variant:"secondary",children:"(34)"})]})]})}),e.jsx(j,{label:"STATUS",children:e.jsxs(f,{children:[e.jsxs(n,{active:l==="all",onClick:()=>c("all"),children:["All ",e.jsx(i,{variant:"secondary",children:"(247)"})]}),e.jsxs(n,{active:l==="active",onClick:()=>c("active"),children:["Active ",e.jsx(i,{variant:"secondary",children:"(235)"})]}),e.jsxs(n,{active:l==="expiring",onClick:()=>c("expiring"),children:["Expiring ",e.jsx(i,{variant:"secondary",children:"(12)"})]}),e.jsxs(n,{active:l==="expired",onClick:()=>c("expired"),children:["Expired ",e.jsx(i,{variant:"secondary",children:"(0)"})]}),e.jsxs(n,{active:l==="revoked",onClick:()=>c("revoked"),children:["Revoked ",e.jsx(i,{variant:"secondary",children:"(0)"})]})]})}),e.jsx(j,{label:"SORT",children:e.jsxs("select",{value:v,onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"issued",children:"Issued"}),e.jsx("option",{value:"expires",children:"Expires"})]})})]}),e.jsx("div",{className:t.tableContainer,children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"40%"},children:"CERTIFICATE"}),e.jsx("th",{style:{width:"10%"},children:"TYPE"}),e.jsx("th",{style:{width:"15%"},children:"ISSUER"}),e.jsx("th",{style:{width:"10%"},children:"STATUS"}),e.jsx("th",{style:{width:"10%"},children:"ISSUED"}),e.jsx("th",{style:{width:"10%"},children:"EXPIRES"}),e.jsx("th",{style:{width:"5%"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:t.certNameCell,children:[e.jsx("span",{className:t.certName,children:s.name}),e.jsxs("span",{className:t.certSerial,children:["Serial: ",s.serial]})]})}),e.jsx("td",{children:e.jsx("span",{className:`${t.badgeType} ${S(s.type)}`,children:s.type})}),e.jsx("td",{children:s.issuer}),e.jsx("td",{children:e.jsx("span",{className:`${t.badgeStatus} ${_(s.status)}`,children:s.status})}),e.jsx("td",{children:s.issued}),e.jsx("td",{children:e.jsxs("div",{className:t.expiresCell,children:[e.jsx("span",{children:s.expires}),e.jsxs("span",{className:`${t.badgeDays} ${C(s.daysLeft)}`,children:[s.daysLeft," DAYS"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:t.actionsCell,children:[e.jsx("button",{className:t.actionBtn,title:"Download",children:e.jsx("i",{className:"ph ph-download-simple"})}),e.jsx("button",{className:t.actionBtn,title:"Renew",children:e.jsx("i",{className:"ph ph-arrow-clockwise"})}),e.jsx("button",{className:t.actionBtn,title:"More",children:e.jsx("i",{className:"ph ph-dots-three-outline-vertical"})})]})})]},s.id))})]})})]})}export{H as CertificateList,H as default};
