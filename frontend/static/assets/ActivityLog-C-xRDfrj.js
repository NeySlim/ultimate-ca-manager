import{r as _,j as t,B as f,z as p}from"./index-CpTdA-tg.js";import{B as n}from"./Badge-B4HI-NPQ.js";import{P as a}from"./PageTopBar-CGcT5f4d.js";import{F as L,a as e}from"./FiltersBar-Cj8DjJxE.js";import{S as T,T as v}from"./SectionTabs-B35khUSA.js";import{u as A}from"./useAccount-bDJKzyWh.js";import{e as I}from"./export-BEFxFx9V.js";import"./useQuery-DbeVqNXB.js";import"./useMutation-DQCl_Ubs.js";import"./api-ClVrI7m4.js";const b="_activityLog_1tt6i_3",k="_filterGroupDate_1tt6i_9",N="_activityList_1tt6i_14",E="_activityItem_1tt6i_23",S="_activityIcon_1tt6i_37",C="_iconSuccess_1tt6i_49",G="_iconError_1tt6i_57",w="_iconWarning_1tt6i_65",B="_iconInfo_1tt6i_73",D="_iconGradient_1tt6i_81",F="_activityContent_1tt6i_89",W="_activityText_1tt6i_96",P="_activityTime_1tt6i_107",i={activityLog:b,filterGroupDate:k,activityList:N,activityItem:E,activityIcon:S,iconSuccess:C,iconError:G,iconWarning:w,iconInfo:B,iconGradient:D,activityContent:F,activityText:W,activityTime:P};function J(){const[s,o]=_.useState("app-logs"),{data:r,isLoading:x,error:l}=A(),y=()=>{const c=r?.data||[];if(c.length===0){p.error("No activity data to export");return}I(c,"activity-logs-export",{format:"csv",columns:["timestamp","user","action","details","status","ip"]}),p.success("Activity logs exported successfully")};if(x)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(a,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(n,{variant:"neutral",children:"Loading..."})}),t.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading activity..."})]});if(l)return t.jsxs("div",{className:i.activityLog,children:[t.jsx(a,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(n,{variant:"danger",children:"Error"})}),t.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--color-danger)"},children:["Error loading activity: ",l.message]})]});const d=r?.data||[],m=d.filter(c=>c.category==="app"||!c.category),h=d.filter(c=>c.category==="pki"),u=s==="app-logs"?m:h,j=c=>{switch(c){case"success":return i.iconSuccess;case"error":return i.iconError;case"warning":return i.iconWarning;case"info":return i.iconInfo;case"gradient":return i.iconGradient;default:return i.iconInfo}};return t.jsxs("div",{className:i.activityLog,children:[t.jsx(a,{icon:"ph ph-clock-clockwise",title:"Activity",badge:t.jsx(n,{variant:"info",children:"Real-time"}),actions:t.jsx(f,{variant:"default",icon:"ph ph-download-simple",onClick:y,children:"Export Logs"})}),t.jsxs(L,{children:[t.jsxs("div",{className:i.filterGroupDate,children:[t.jsx(e,{label:"From",children:t.jsx("input",{type:"date",defaultValue:"2024-01-01"})}),t.jsx(e,{label:"To",children:t.jsx("input",{type:"date",defaultValue:"2024-01-15"})})]}),t.jsx(e,{label:"User",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Users"}),t.jsx("option",{children:"john.doe"}),t.jsx("option",{children:"admin"}),t.jsx("option",{children:"jane.smith"})]})}),t.jsx(e,{label:"Action Type",children:t.jsxs("select",{children:[t.jsx("option",{children:"All Actions"}),t.jsx("option",{children:"Login"}),t.jsx("option",{children:"Configuration"}),t.jsx("option",{children:"User Management"})]})}),t.jsx(e,{label:"Search",children:t.jsx("input",{type:"text",placeholder:"Search activities..."})})]}),t.jsxs(T,{children:[t.jsx(v,{active:s==="app-logs",onClick:()=>o("app-logs"),children:"Application Logs"}),t.jsx(v,{active:s==="pki-ops",onClick:()=>o("pki-ops"),children:"PKI Operations"})]}),t.jsx("div",{className:i.activityList,children:u.map((c,g)=>t.jsxs("div",{className:i.activityItem,children:[t.jsx("div",{className:`${i.activityIcon} ${j(c.type)}`,children:t.jsx("i",{className:`ph ${c.icon}`})}),t.jsxs("div",{className:i.activityContent,children:[t.jsx("div",{className:i.activityText,dangerouslySetInnerHTML:{__html:c.text}}),t.jsx("div",{className:i.activityTime,children:c.time})]})]},g))})]})}export{J as ActivityLog,J as default};
